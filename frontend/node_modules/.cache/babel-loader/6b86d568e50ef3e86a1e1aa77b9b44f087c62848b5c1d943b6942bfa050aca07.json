{"ast":null,"code":"import { ref, computed, onMounted, onUnmounted } from 'vue';\nimport BaseEChart from '@/components/BaseEChart.vue';\nimport PhotoTimeline from '@/components/PhotoTimeline.vue';\nimport { Monitor, Connection, Warning, InfoFilled, Cpu, ArrowUp, ArrowDown, Plus, View, Setting, Delete, Search, Grid, List } from '@element-plus/icons-vue';\nimport { ElMessage, ElMessageBox } from 'element-plus';\n\n// WebSocket连接\nconst MAX_RECONNECT_ATTEMPTS = 5;\n\n// 初始化WebSocket连接\n\nexport default {\n  __name: 'Monitoring',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const ws = ref(null);\n    const wsReconnectTimer = ref(null);\n    const wsReconnectAttempts = ref(0);\n    const initWebSocket = () => {\n      if (ws.value) return;\n      ws.value = new WebSocket(process.env.VUE_APP_WS_URL || 'ws://localhost:8080/api/ws/monitoring');\n      ws.value.onopen = () => {\n        console.log('WebSocket connected');\n        wsReconnectAttempts.value = 0;\n      };\n      ws.value.onmessage = event => {\n        const data = JSON.parse(event.data);\n        handleWebSocketMessage(data);\n      };\n      ws.value.onclose = () => {\n        console.log('WebSocket disconnected');\n        ws.value = null;\n        handleWebSocketReconnect();\n      };\n      ws.value.onerror = error => {\n        console.error('WebSocket error:', error);\n        ws.value?.close();\n      };\n    };\n\n    // 处理WebSocket重连\n    const handleWebSocketReconnect = () => {\n      if (wsReconnectAttempts.value >= MAX_RECONNECT_ATTEMPTS) {\n        ElMessage.error('连接服务器失败，请刷新页面重试');\n        return;\n      }\n      if (wsReconnectTimer.value) {\n        clearTimeout(wsReconnectTimer.value);\n      }\n      wsReconnectTimer.value = setTimeout(() => {\n        wsReconnectAttempts.value++;\n        initWebSocket();\n      }, 3000 * Math.min(wsReconnectAttempts.value + 1, 5));\n    };\n\n    // 处理WebSocket消息\n    const handleWebSocketMessage = data => {\n      switch (data.type) {\n        case 'deviceUpdate':\n          updateDeviceData(data.payload);\n          break;\n        case 'alert':\n          handleNewAlert(data.payload);\n          break;\n        case 'stats':\n          updateDeviceStats(data.payload);\n          break;\n      }\n    };\n\n    // 更新设备数据\n    const updateDeviceData = deviceData => {\n      const index = deviceList.value.findIndex(d => d.name === deviceData.name);\n      if (index !== -1) {\n        deviceList.value[index] = {\n          ...deviceList.value[index],\n          ...deviceData\n        };\n      }\n    };\n\n    // 处理新告警\n    const handleNewAlert = alert => {\n      alerts.value.unshift({\n        ...alert,\n        unread: true\n      });\n\n      // 限制告警列表长度\n      if (alerts.value.length > 50) {\n        alerts.value = alerts.value.slice(0, 50);\n      }\n\n      // 显示告警通知\n      ElMessage({\n        type: alert.level === 'error' ? 'error' : alert.level === 'warning' ? 'warning' : 'info',\n        message: `${alert.device}: ${alert.title}`,\n        duration: 5000\n      });\n    };\n\n    // 更新设备统计数据\n    const updateDeviceStats = stats => {\n      deviceStats.value = stats;\n    };\n\n    // 组件挂载时初始化WebSocket\n    onMounted(() => {\n      initWebSocket();\n    });\n\n    // 组件卸载时清理WebSocket\n    onUnmounted(() => {\n      if (ws.value) {\n        ws.value.close();\n        ws.value = null;\n      }\n      if (wsReconnectTimer.value) {\n        clearTimeout(wsReconnectTimer.value);\n      }\n    });\n\n    // 视图模式\n    const viewMode = ref('grid');\n\n    // 设备统计数据\n    const deviceStats = ref({\n      online: 12,\n      offline: 3,\n      error: 1,\n      total: 16\n    });\n\n    // 设备列表数据\n    const deviceList = ref([{\n      name: '传感器A',\n      type: '温湿度',\n      status: 'online',\n      location: '田块1',\n      latestData: '温度: 25°C, 湿度: 65%',\n      lastUpdate: '2024-03-15 14:30:00'\n    }, {\n      name: '摄像头B',\n      type: '视频监控',\n      status: 'offline',\n      location: '田块2',\n      latestData: '离线中',\n      lastUpdate: '2024-03-15 10:15:00'\n    }, {\n      name: '网关C',\n      type: '数据网关',\n      status: 'online',\n      location: '田块3',\n      latestData: '数据流量: 2.5MB/s',\n      lastUpdate: '2024-03-15 14:35:00'\n    }, {\n      name: '传感器D',\n      type: 'PH值',\n      status: 'error',\n      location: '田块4',\n      latestData: 'PH值: 异常',\n      lastUpdate: '2024-03-15 14:20:00'\n    }]);\n\n    // 告警数据\n    const alerts = ref([{\n      id: 1,\n      title: 'PH值超出正常范围',\n      device: '传感器D',\n      time: '10分钟前',\n      level: 'error',\n      unread: true\n    }, {\n      id: 2,\n      title: '设备离线超过4小时',\n      device: '摄像头B',\n      time: '4小时前',\n      level: 'warning',\n      unread: true\n    }, {\n      id: 3,\n      title: '数据传输异常',\n      device: '网关C',\n      time: '2小时前',\n      level: 'info',\n      unread: false\n    }]);\n\n    // 搜索和筛选\n    const searchQuery = ref('');\n    const filterStatus = ref('');\n    const filterType = ref('');\n    const filteredDeviceList = computed(() => {\n      return deviceList.value.filter(device => {\n        const matchSearch = device.name.toLowerCase().includes(searchQuery.value.toLowerCase()) || device.type.toLowerCase().includes(searchQuery.value.toLowerCase()) || device.location.toLowerCase().includes(searchQuery.value.toLowerCase());\n        const matchStatus = !filterStatus.value || device.status === filterStatus.value;\n        const matchType = !filterType.value || device.type === filterType.value;\n        return matchSearch && matchStatus && matchType;\n      });\n    });\n\n    // 设备详情相关\n    const showDetail = ref(false);\n    const currentDevice = ref(null);\n    const deviceAlerts = ref([{\n      time: '2024-03-15 14:20:00',\n      title: 'PH值超出正常范围',\n      level: 'error',\n      status: '未处理'\n    }, {\n      time: '2024-03-15 10:15:00',\n      title: '设备离线',\n      level: 'warning',\n      status: '已处理'\n    }, {\n      time: '2024-03-14 16:30:00',\n      title: '数据异常',\n      level: 'info',\n      status: '已处理'\n    }]);\n\n    // 新增设备相关\n    const showAddDeviceDialog = ref(false);\n    const deviceForm = ref(null);\n    const newDevice = ref({\n      name: '',\n      type: '',\n      location: ''\n    });\n    const deviceRules = {\n      name: [{\n        required: true,\n        message: '请输入设备名称',\n        trigger: 'blur'\n      }, {\n        min: 2,\n        max: 20,\n        message: '长度在 2 到 20 个字符',\n        trigger: 'blur'\n      }],\n      type: [{\n        required: true,\n        message: '请选择设备类型',\n        trigger: 'change'\n      }],\n      location: [{\n        required: true,\n        message: '请输入安装位置',\n        trigger: 'blur'\n      }]\n    };\n\n    // 图表相关\n    const selectedDevice = ref('');\n    /* 实时数据图表配置 */\n    const chartOptions = computed(() => ({\n      backgroundColor: 'transparent',\n      grid: {\n        top: 60,\n        right: 20,\n        bottom: 30,\n        left: 50,\n        containLabel: true\n      },\n      title: {\n        text: '实时数据趋势',\n        textStyle: {\n          color: 'rgba(255, 255, 255, 0.85)',\n          fontSize: 16,\n          fontWeight: 500\n        },\n        top: 20,\n        left: 20\n      },\n      tooltip: {\n        trigger: 'axis',\n        backgroundColor: 'rgba(13, 42, 77, 0.9)',\n        borderColor: 'rgba(30, 73, 118, 0.3)',\n        textStyle: {\n          color: '#fff'\n        }\n      },\n      legend: {\n        data: ['温度', '湿度', 'PH值'],\n        textStyle: {\n          color: 'rgba(255, 255, 255, 0.65)'\n        },\n        top: 20,\n        right: 20\n      },\n      xAxis: {\n        type: 'time',\n        axisLine: {\n          lineStyle: {\n            color: 'rgba(255, 255, 255, 0.1)'\n          }\n        },\n        axisLabel: {\n          color: 'rgba(255, 255, 255, 0.65)',\n          formatter: value => {\n            const date = new Date(value);\n            return `${date.getHours()}:${date.getMinutes().toString().padStart(2, '0')}`;\n          }\n        },\n        splitLine: {\n          show: true,\n          lineStyle: {\n            color: 'rgba(255, 255, 255, 0.1)'\n          }\n        }\n      },\n      yAxis: {\n        type: 'value',\n        axisLine: {\n          lineStyle: {\n            color: 'rgba(255, 255, 255, 0.1)'\n          }\n        },\n        axisLabel: {\n          color: 'rgba(255, 255, 255, 0.65)'\n        },\n        splitLine: {\n          lineStyle: {\n            color: 'rgba(255, 255, 255, 0.1)'\n          }\n        }\n      },\n      series: [{\n        name: '温度',\n        type: 'line',\n        smooth: true,\n        symbol: 'circle',\n        symbolSize: 8,\n        itemStyle: {\n          color: '#1890ff'\n        },\n        areaStyle: {\n          color: {\n            type: 'linear',\n            x: 0,\n            y: 0,\n            x2: 0,\n            y2: 1,\n            colorStops: [{\n              offset: 0,\n              color: 'rgba(24, 144, 255, 0.3)'\n            }, {\n              offset: 1,\n              color: 'rgba(24, 144, 255, 0.05)'\n            }]\n          }\n        },\n        data: generateTimeData(25, 2)\n      }, {\n        name: '湿度',\n        type: 'line',\n        smooth: true,\n        symbol: 'circle',\n        symbolSize: 8,\n        itemStyle: {\n          color: '#52c41a'\n        },\n        areaStyle: {\n          color: {\n            type: 'linear',\n            x: 0,\n            y: 0,\n            x2: 0,\n            y2: 1,\n            colorStops: [{\n              offset: 0,\n              color: 'rgba(82, 196, 26, 0.3)'\n            }, {\n              offset: 1,\n              color: 'rgba(82, 196, 26, 0.05)'\n            }]\n          }\n        },\n        data: generateTimeData(65, 5)\n      }, {\n        name: 'PH值',\n        type: 'line',\n        smooth: true,\n        symbol: 'circle',\n        symbolSize: 8,\n        itemStyle: {\n          color: '#faad14'\n        },\n        areaStyle: {\n          color: {\n            type: 'linear',\n            x: 0,\n            y: 0,\n            x2: 0,\n            y2: 1,\n            colorStops: [{\n              offset: 0,\n              color: 'rgba(250, 173, 20, 0.3)'\n            }, {\n              offset: 1,\n              color: 'rgba(250, 173, 20, 0.05)'\n            }]\n          }\n        },\n        data: generateTimeData(7, 0.5)\n      }]\n    }));\n    const historyChartOptions = computed(() => ({\n      backgroundColor: 'transparent',\n      title: {\n        text: '历史数据趋势',\n        textStyle: {\n          color: '#fff'\n        }\n      },\n      tooltip: {\n        trigger: 'axis',\n        axisPointer: {\n          type: 'shadow'\n        }\n      },\n      legend: {\n        data: ['温度', '湿度', 'PH值'],\n        textStyle: {\n          color: '#fff'\n        },\n        top: 30\n      },\n      grid: {\n        top: 80,\n        right: 20,\n        bottom: 30,\n        left: 50,\n        containLabel: true\n      },\n      xAxis: {\n        type: 'category',\n        data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],\n        axisLabel: {\n          color: '#fff'\n        },\n        axisLine: {\n          lineStyle: {\n            color: '#8c8c8c'\n          }\n        }\n      },\n      yAxis: {\n        type: 'value',\n        axisLabel: {\n          color: '#fff'\n        },\n        splitLine: {\n          lineStyle: {\n            color: 'rgba(255, 255, 255, 0.1)'\n          }\n        },\n        axisLine: {\n          lineStyle: {\n            color: '#8c8c8c'\n          }\n        }\n      },\n      series: [{\n        name: '温度',\n        type: 'bar',\n        data: [23, 24, 25, 23, 24, 26, 25],\n        itemStyle: {\n          color: {\n            type: 'linear',\n            x: 0,\n            y: 0,\n            x2: 0,\n            y2: 1,\n            colorStops: [{\n              offset: 0,\n              color: '#1890ff'\n            }, {\n              offset: 1,\n              color: 'rgba(24, 144, 255, 0.3)'\n            }]\n          }\n        }\n      }, {\n        name: '湿度',\n        type: 'bar',\n        data: [65, 63, 68, 64, 62, 65, 66],\n        itemStyle: {\n          color: {\n            type: 'linear',\n            x: 0,\n            y: 0,\n            x2: 0,\n            y2: 1,\n            colorStops: [{\n              offset: 0,\n              color: '#52c41a'\n            }, {\n              offset: 1,\n              color: 'rgba(82, 196, 26, 0.3)'\n            }]\n          }\n        }\n      }, {\n        name: 'PH值',\n        type: 'bar',\n        data: [7.1, 7.0, 7.2, 7.1, 7.0, 7.1, 7.2],\n        itemStyle: {\n          color: {\n            type: 'linear',\n            x: 0,\n            y: 0,\n            x2: 0,\n            y2: 1,\n            colorStops: [{\n              offset: 0,\n              color: '#faad14'\n            }, {\n              offset: 1,\n              color: 'rgba(250, 173, 20, 0.3)'\n            }]\n          }\n        }\n      }]\n    }));\n\n    // 生成时间序列数据\n    function generateTimeData(baseValue, variance) {\n      const now = new Date();\n      const data = [];\n      for (let i = 0; i < 60; i++) {\n        const time = new Date(now - (59 - i) * 60000);\n        data.push([time.toISOString(), +(baseValue + (Math.random() * 2 - 1) * variance).toFixed(1)]);\n      }\n      return data;\n    }\n\n    // 告警相关\n    // Removing duplicate alerts declaration since it's already defined above\n    // const alerts = ref([...])\n\n    // 处理告警\n    function handleAlert(alert) {\n      alert.unread = false;\n      ElMessage.success(`已处理告警：${alert.title}`);\n    }\n\n    // 方法\n    function getDeviceIcon(type) {\n      return {\n        '温湿度': 'temperature',\n        'PH值': 'experiment',\n        '视频监控': 'video-camera',\n        '数据网关': 'connection'\n      }[type] || 'monitor';\n    }\n    function getDeviceTagType(type) {\n      return {\n        '温湿度': '',\n        'PH值': 'warning',\n        '视频监控': 'success',\n        '数据网关': 'info'\n      }[type] || 'info';\n    }\n    function getStatusText(status) {\n      return {\n        online: '在线',\n        offline: '离线',\n        error: '异常'\n      }[status] || status;\n    }\n    function getAlertTagType(level) {\n      return {\n        error: 'danger',\n        warning: 'warning',\n        info: 'info'\n      }[level] || 'info';\n    }\n    function viewDetail(device) {\n      currentDevice.value = device;\n      showDetail.value = true;\n    }\n    function configDevice(device) {\n      ElMessage.info(`配置设备: ${device.name}`);\n    }\n    function deleteDevice(device) {\n      ElMessageBox.confirm(`确定要删除设备 ${device.name} 吗？`, '警告', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        deviceList.value = deviceList.value.filter(d => d !== device);\n        ElMessage.success('删除成功');\n      }).catch(() => {});\n    }\n    function showAddDevice() {\n      showAddDeviceDialog.value = true;\n    }\n    function submitNewDevice() {\n      deviceForm.value?.validate(valid => {\n        if (valid) {\n          const device = {\n            ...newDevice.value,\n            status: 'online',\n            latestData: '暂无数据',\n            lastUpdate: new Date().toLocaleString()\n          };\n          deviceList.value.push(device);\n          showAddDeviceDialog.value = false;\n          ElMessage.success('添加成功');\n          newDevice.value = {\n            name: '',\n            type: '',\n            location: ''\n          };\n        }\n      });\n    }\n    const __returned__ = {\n      ws,\n      wsReconnectTimer,\n      wsReconnectAttempts,\n      MAX_RECONNECT_ATTEMPTS,\n      initWebSocket,\n      handleWebSocketReconnect,\n      handleWebSocketMessage,\n      updateDeviceData,\n      handleNewAlert,\n      updateDeviceStats,\n      viewMode,\n      deviceStats,\n      deviceList,\n      alerts,\n      searchQuery,\n      filterStatus,\n      filterType,\n      filteredDeviceList,\n      showDetail,\n      currentDevice,\n      deviceAlerts,\n      showAddDeviceDialog,\n      deviceForm,\n      newDevice,\n      deviceRules,\n      selectedDevice,\n      chartOptions,\n      historyChartOptions,\n      generateTimeData,\n      handleAlert,\n      getDeviceIcon,\n      getDeviceTagType,\n      getStatusText,\n      getAlertTagType,\n      viewDetail,\n      configDevice,\n      deleteDevice,\n      showAddDevice,\n      submitNewDevice,\n      ref,\n      computed,\n      onMounted,\n      onUnmounted,\n      BaseEChart,\n      PhotoTimeline,\n      get Monitor() {\n        return Monitor;\n      },\n      get Connection() {\n        return Connection;\n      },\n      get Warning() {\n        return Warning;\n      },\n      get InfoFilled() {\n        return InfoFilled;\n      },\n      get Cpu() {\n        return Cpu;\n      },\n      get ArrowUp() {\n        return ArrowUp;\n      },\n      get ArrowDown() {\n        return ArrowDown;\n      },\n      get Plus() {\n        return Plus;\n      },\n      get View() {\n        return View;\n      },\n      get Setting() {\n        return Setting;\n      },\n      get Delete() {\n        return Delete;\n      },\n      get Search() {\n        return Search;\n      },\n      get Grid() {\n        return Grid;\n      },\n      get List() {\n        return List;\n      },\n      get ElMessage() {\n        return ElMessage;\n      },\n      get ElMessageBox() {\n        return ElMessageBox;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","onUnmounted","BaseEChart","PhotoTimeline","Monitor","Connection","Warning","InfoFilled","Cpu","ArrowUp","ArrowDown","Plus","View","Setting","Delete","Search","Grid","List","ElMessage","ElMessageBox","MAX_RECONNECT_ATTEMPTS","ws","wsReconnectTimer","wsReconnectAttempts","initWebSocket","value","WebSocket","process","env","VUE_APP_WS_URL","onopen","console","log","onmessage","event","data","JSON","parse","handleWebSocketMessage","onclose","handleWebSocketReconnect","onerror","error","close","clearTimeout","setTimeout","Math","min","type","updateDeviceData","payload","handleNewAlert","updateDeviceStats","deviceData","index","deviceList","findIndex","d","name","alert","alerts","unshift","unread","length","slice","level","message","device","title","duration","stats","deviceStats","viewMode","online","offline","total","status","location","latestData","lastUpdate","id","time","searchQuery","filterStatus","filterType","filteredDeviceList","filter","matchSearch","toLowerCase","includes","matchStatus","matchType","showDetail","currentDevice","deviceAlerts","showAddDeviceDialog","deviceForm","newDevice","deviceRules","required","trigger","max","selectedDevice","chartOptions","backgroundColor","grid","top","right","bottom","left","containLabel","text","textStyle","color","fontSize","fontWeight","tooltip","borderColor","legend","xAxis","axisLine","lineStyle","axisLabel","formatter","date","Date","getHours","getMinutes","toString","padStart","splitLine","show","yAxis","series","smooth","symbol","symbolSize","itemStyle","areaStyle","x","y","x2","y2","colorStops","offset","generateTimeData","historyChartOptions","axisPointer","baseValue","variance","now","i","push","toISOString","random","toFixed","handleAlert","success","getDeviceIcon","getDeviceTagType","getStatusText","getAlertTagType","warning","info","viewDetail","configDevice","deleteDevice","confirm","confirmButtonText","cancelButtonText","then","catch","showAddDevice","submitNewDevice","validate","valid","toLocaleString"],"sources":["D:/restore/water-melt/frontend/src/views/Monitoring.vue"],"sourcesContent":["<!-- Monitoring.vue -->\r\n<template>\r\n  <div class=\"monitoring-view\">\r\n    <!-- 顶部统计卡片 -->\r\n    <div class=\"stats-section\">\r\n      <div class=\"stat-card online\">\r\n        <div class=\"stat-icon\">\r\n          <el-icon><Monitor /></el-icon>\r\n        </div>\r\n        <div class=\"stat-content\">\r\n          <div class=\"stat-value\">{{ deviceStats.online }}</div>\r\n          <div class=\"stat-label\">在线设备</div>\r\n        </div>\r\n        <div class=\"stat-trend up\">\r\n          <el-icon><ArrowUp /></el-icon>\r\n          <span>2台</span>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"stat-card offline\">\r\n        <div class=\"stat-icon\">\r\n          <el-icon><Connection /></el-icon>\r\n        </div>\r\n        <div class=\"stat-content\">\r\n          <div class=\"stat-value\">{{ deviceStats.offline }}</div>\r\n          <div class=\"stat-label\">离线设备</div>\r\n        </div>\r\n        <div class=\"stat-trend down\">\r\n          <el-icon><ArrowDown /></el-icon>\r\n          <span>1台</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"stat-card error\">\r\n        <div class=\"stat-icon\">\r\n          <el-icon><Warning /></el-icon>\r\n        </div>\r\n        <div class=\"stat-content\">\r\n          <div class=\"stat-value\">{{ deviceStats.error }}</div>\r\n          <div class=\"stat-label\">异常设备</div>\r\n        </div>\r\n        <div class=\"stat-trend\">\r\n          <el-icon><InfoFilled /></el-icon>\r\n          <span>无变化</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"stat-card total\">\r\n        <div class=\"stat-icon\">\r\n          <el-icon><Cpu /></el-icon>\r\n        </div>\r\n        <div class=\"stat-content\">\r\n          <div class=\"stat-value\">{{ deviceStats.total }}</div>\r\n          <div class=\"stat-label\">设备总数</div>\r\n        </div>\r\n        <div class=\"stat-trend up\">\r\n          <el-icon><ArrowUp /></el-icon>\r\n          <span>1台</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 主要内容区域 -->\r\n    <div class=\"main-content\">\r\n      <!-- 左侧：设备列表和状态 -->\r\n      <div class=\"content-main\">\r\n        <div class=\"panel device-list-panel\">\r\n          <div class=\"panel-header\">\r\n            <div class=\"header-left\">\r\n              <h3>设备管理</h3>\r\n              <el-button-group>\r\n                <el-button type=\"primary\" @click=\"showAddDevice\">\r\n                  <el-icon><Plus /></el-icon>新增设备\r\n                </el-button>\r\n                <el-button :class=\"{ active: viewMode === 'grid' }\" @click=\"viewMode = 'grid'\">\r\n                  <el-icon><Grid /></el-icon>\r\n                </el-button>\r\n                <el-button :class=\"{ active: viewMode === 'table' }\" @click=\"viewMode = 'table'\">\r\n                  <el-icon><List /></el-icon>\r\n                </el-button>\r\n              </el-button-group>\r\n            </div>\r\n            <div class=\"header-right\">\r\n              <el-input\r\n                v-model=\"searchQuery\"\r\n                placeholder=\"搜索设备...\"\r\n                prefix-icon=\"Search\"\r\n                clearable\r\n              />\r\n              <el-select v-model=\"filterStatus\" placeholder=\"状态筛选\" clearable>\r\n                <el-option label=\"全部\" value=\"\" />\r\n                <el-option label=\"在线\" value=\"online\" />\r\n                <el-option label=\"离线\" value=\"offline\" />\r\n                <el-option label=\"异常\" value=\"error\" />\r\n              </el-select>\r\n              <el-select v-model=\"filterType\" placeholder=\"类型筛选\" clearable>\r\n                <el-option label=\"全部\" value=\"\" />\r\n                <el-option label=\"温湿度\" value=\"温湿度\" />\r\n                <el-option label=\"PH值\" value=\"PH值\" />\r\n                <el-option label=\"视频监控\" value=\"视频监控\" />\r\n                <el-option label=\"数据网关\" value=\"数据网关\" />\r\n              </el-select>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 网格视图 -->\r\n          <div v-if=\"viewMode === 'grid'\" class=\"device-grid\">\r\n            <div v-for=\"device in filteredDeviceList\" \r\n                 :key=\"device.name\" \r\n                 class=\"device-card\"\r\n                 :class=\"device.status\">\r\n              <div class=\"device-card-header\">\r\n                <div class=\"device-icon\">\r\n                  <el-icon :class=\"getDeviceIcon(device.type)\"><Monitor /></el-icon>\r\n                </div>\r\n                <div class=\"device-status\">\r\n                  <span class=\"status-dot\"></span>\r\n                  {{ getStatusText(device.status) }}\r\n                </div>\r\n              </div>\r\n              <div class=\"device-card-content\">\r\n                <div class=\"device-name\">{{ device.name }}</div>\r\n                <div class=\"device-type\">\r\n                  <el-tag :type=\"getDeviceTagType(device.type)\" size=\"small\">{{ device.type }}</el-tag>\r\n                </div>\r\n                <div class=\"device-location\">{{ device.location }}</div>\r\n                <div class=\"device-data\">\r\n                  <el-tooltip \r\n                    :content=\"device.lastUpdate\" \r\n                    placement=\"top\"\r\n                  >\r\n                    <span>{{ device.latestData }}</span>\r\n                  </el-tooltip>\r\n                </div>\r\n              </div>\r\n              <div class=\"device-card-footer\">\r\n                <el-button-group>\r\n                  <el-button size=\"small\" @click=\"viewDetail(device)\">\r\n                    <el-icon><View /></el-icon>\r\n                    详情\r\n                  </el-button>\r\n                  <el-button size=\"small\" type=\"primary\" @click=\"configDevice(device)\">\r\n                    <el-icon><Setting /></el-icon>\r\n                    配置\r\n                  </el-button>\r\n                  <el-button size=\"small\" type=\"danger\" @click=\"deleteDevice(device)\">\r\n                    <el-icon><Delete /></el-icon>\r\n                    删除\r\n                  </el-button>\r\n                </el-button-group>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 表格视图 -->\r\n          <el-table \r\n            v-else\r\n            :data=\"filteredDeviceList\" \r\n            style=\"width: 100%\"\r\n            :header-cell-style=\"{ background: '#1a1a1a', color: '#fff' }\"\r\n          >\r\n            <el-table-column prop=\"name\" label=\"设备名称\">\r\n              <template #default=\"{ row }\">\r\n                <div class=\"device-name\">\r\n                  <el-icon :class=\"getDeviceIcon(row.type)\"><Monitor /></el-icon>\r\n                  <span>{{ row.name }}</span>\r\n                </div>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"type\" label=\"类型\" width=\"120\">\r\n              <template #default=\"{ row }\">\r\n                <el-tag :type=\"getDeviceTagType(row.type)\">{{ row.type }}</el-tag>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"status\" label=\"状态\" width=\"100\">\r\n              <template #default=\"{ row }\">\r\n                <div class=\"status-indicator\" :class=\"row.status\">\r\n                  <span class=\"status-dot\"></span>\r\n                  {{ getStatusText(row.status) }}\r\n                </div>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"location\" label=\"位置\" width=\"120\" />\r\n            <el-table-column label=\"最近数据\" width=\"180\">\r\n              <template #default=\"{ row }\">\r\n                <div class=\"latest-data\">\r\n                  <el-tooltip \r\n                    :content=\"row.lastUpdate\" \r\n                    placement=\"top\"\r\n                  >\r\n                    <span>{{ row.latestData }}</span>\r\n                  </el-tooltip>\r\n                </div>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\" width=\"200\" fixed=\"right\">\r\n              <template #default=\"{ row }\">\r\n                <el-button-group>\r\n                  <el-button size=\"small\" @click=\"viewDetail(row)\">\r\n                    <el-icon><View /></el-icon>\r\n                  </el-button>\r\n                  <el-button size=\"small\" type=\"primary\" @click=\"configDevice(row)\">\r\n                    <el-icon><Setting /></el-icon>\r\n                  </el-button>\r\n                  <el-button size=\"small\" type=\"danger\" @click=\"deleteDevice(row)\">\r\n                    <el-icon><Delete /></el-icon>\r\n                  </el-button>\r\n                </el-button-group>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 右侧：实时数据和告警 -->\r\n      <div class=\"content-side\">\r\n        <!-- 实时数据图表 -->\r\n        <div class=\"side-panel\">\r\n          <div class=\"panel-header\">\r\n            <h3>实时数据</h3>\r\n            <el-select v-model=\"selectedDevice\" size=\"small\" placeholder=\"选择设备\">\r\n              <el-option \r\n                v-for=\"device in deviceList\" \r\n                :key=\"device.name\" \r\n                :label=\"device.name\" \r\n                :value=\"device.name\"\r\n              />\r\n            </el-select>\r\n          </div>\r\n          <div class=\"chart-container\">\r\n            <base-e-chart :options=\"chartOptions\" />\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 最近告警 -->\r\n        <div class=\"side-panel\">\r\n          <div class=\"panel-header\">\r\n            <h3>最近告警</h3>\r\n            <el-tag size=\"small\" type=\"danger\">{{ alerts.length }} 个未处理</el-tag>\r\n          </div>\r\n          <div class=\"alert-list\">\r\n            <div v-for=\"alert in alerts\" \r\n                 :key=\"alert.id\" \r\n                 class=\"alert-item\"\r\n                 :class=\"[alert.level, { unread: alert.unread }]\"\r\n                 @click=\"handleAlert(alert)\">\r\n              <div class=\"alert-icon\">\r\n                <el-icon><Warning /></el-icon>\r\n              </div>\r\n              <div class=\"alert-content\">\r\n                <div class=\"alert-title\">{{ alert.title }}</div>\r\n                <div class=\"alert-info\">\r\n                  <span class=\"alert-device\">{{ alert.device }}</span>\r\n                  <span class=\"alert-time\">{{ alert.time }}</span>\r\n                </div>\r\n              </div>\r\n              <div class=\"alert-action\">\r\n                <el-button size=\"small\" type=\"primary\" link>处理</el-button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 动态照片播放 -->\r\n        <div class=\"side-panel\">\r\n          <div class=\"panel-header\">\r\n            <h3>智能检测照片</h3>\r\n          </div>\r\n          <photo-timeline />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 设备详情对话框 -->\r\n    <el-dialog \r\n      v-model=\"showDetail\" \r\n      title=\"设备详情\" \r\n      width=\"60%\"\r\n      destroy-on-close\r\n    >\r\n      <el-tabs v-if=\"currentDevice\">\r\n        <el-tab-pane label=\"基本信息\">\r\n          <div class=\"device-info\">\r\n            <div class=\"info-item\">\r\n              <span class=\"label\">设备名称</span>\r\n              <span class=\"value\">{{ currentDevice.name }}</span>\r\n            </div>\r\n            <div class=\"info-item\">\r\n              <span class=\"label\">设备类型</span>\r\n              <span class=\"value\">{{ currentDevice.type }}</span>\r\n            </div>\r\n            <div class=\"info-item\">\r\n              <span class=\"label\">当前状态</span>\r\n              <span class=\"value\">{{ getStatusText(currentDevice.status) }}</span>\r\n            </div>\r\n            <div class=\"info-item\">\r\n              <span class=\"label\">安装位置</span>\r\n              <span class=\"value\">{{ currentDevice.location }}</span>\r\n            </div>\r\n            <div class=\"info-item\">\r\n              <span class=\"label\">最近数据</span>\r\n              <span class=\"value\">{{ currentDevice.latestData }}</span>\r\n            </div>\r\n            <div class=\"info-item\">\r\n              <span class=\"label\">最后更新</span>\r\n              <span class=\"value\">{{ currentDevice.lastUpdate }}</span>\r\n            </div>\r\n          </div>\r\n        </el-tab-pane>\r\n        <el-tab-pane label=\"历史数据\">\r\n          <div class=\"history-data\">\r\n            <base-e-chart :options=\"historyChartOptions\" />\r\n          </div>\r\n        </el-tab-pane>\r\n        <el-tab-pane label=\"告警记录\">\r\n          <el-table :data=\"deviceAlerts\" style=\"width: 100%\">\r\n            <el-table-column prop=\"time\" label=\"时间\" width=\"180\" />\r\n            <el-table-column prop=\"title\" label=\"告警内容\" />\r\n            <el-table-column prop=\"level\" label=\"级别\" width=\"100\">\r\n              <template #default=\"{ row }\">\r\n                <el-tag :type=\"getAlertTagType(row.level)\">{{ row.level }}</el-tag>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"status\" label=\"状态\" width=\"100\" />\r\n          </el-table>\r\n        </el-tab-pane>\r\n      </el-tabs>\r\n    </el-dialog>\r\n\r\n    <!-- 新增设备对话框 -->\r\n    <el-dialog \r\n      v-model=\"showAddDeviceDialog\" \r\n      title=\"新增设备\" \r\n      width=\"50%\"\r\n      destroy-on-close\r\n    >\r\n      <el-form \r\n        ref=\"deviceForm\"\r\n        :model=\"newDevice\"\r\n        :rules=\"deviceRules\"\r\n        label-width=\"100px\"\r\n      >\r\n        <el-form-item label=\"设备名称\" prop=\"name\">\r\n          <el-input v-model=\"newDevice.name\" placeholder=\"请输入设备名称\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"设备类型\" prop=\"type\">\r\n          <el-select v-model=\"newDevice.type\" placeholder=\"请选择设备类型\">\r\n            <el-option label=\"温湿度传感器\" value=\"温湿度\" />\r\n            <el-option label=\"PH值传感器\" value=\"PH值\" />\r\n            <el-option label=\"视频监控\" value=\"视频监控\" />\r\n            <el-option label=\"数据网关\" value=\"数据网关\" />\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"安装位置\" prop=\"location\">\r\n          <el-input v-model=\"newDevice.location\" placeholder=\"请输入安装位置\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <el-button @click=\"showAddDeviceDialog = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitNewDevice\">确定</el-button>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, onUnmounted } from 'vue'\r\nimport BaseEChart from '@/components/BaseEChart.vue'\r\nimport PhotoTimeline from '@/components/PhotoTimeline.vue'\r\nimport { \r\n  Monitor, Connection, Warning, InfoFilled, Cpu, \r\n  ArrowUp, ArrowDown, Plus, View, Setting, Delete, Search,\r\n  Grid, List\r\n} from '@element-plus/icons-vue'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\n\r\n// WebSocket连接\r\nconst ws = ref(null)\r\nconst wsReconnectTimer = ref(null)\r\nconst wsReconnectAttempts = ref(0)\r\nconst MAX_RECONNECT_ATTEMPTS = 5\r\n\r\n// 初始化WebSocket连接\r\nconst initWebSocket = () => {\r\n  if (ws.value) return\r\n\r\n  ws.value = new WebSocket(process.env.VUE_APP_WS_URL || 'ws://localhost:8080/api/ws/monitoring')\r\n  \r\n  ws.value.onopen = () => {\r\n    console.log('WebSocket connected')\r\n    wsReconnectAttempts.value = 0\r\n  }\r\n\r\n  ws.value.onmessage = (event) => {\r\n    const data = JSON.parse(event.data)\r\n    handleWebSocketMessage(data)\r\n  }\r\n\r\n  ws.value.onclose = () => {\r\n    console.log('WebSocket disconnected')\r\n    ws.value = null\r\n    handleWebSocketReconnect()\r\n  }\r\n\r\n  ws.value.onerror = (error) => {\r\n    console.error('WebSocket error:', error)\r\n    ws.value?.close()\r\n  }\r\n}\r\n\r\n// 处理WebSocket重连\r\nconst handleWebSocketReconnect = () => {\r\n  if (wsReconnectAttempts.value >= MAX_RECONNECT_ATTEMPTS) {\r\n    ElMessage.error('连接服务器失败，请刷新页面重试')\r\n    return\r\n  }\r\n\r\n  if (wsReconnectTimer.value) {\r\n    clearTimeout(wsReconnectTimer.value)\r\n  }\r\n\r\n  wsReconnectTimer.value = setTimeout(() => {\r\n    wsReconnectAttempts.value++\r\n    initWebSocket()\r\n  }, 3000 * Math.min(wsReconnectAttempts.value + 1, 5))\r\n}\r\n\r\n// 处理WebSocket消息\r\nconst handleWebSocketMessage = (data) => {\r\n  switch (data.type) {\r\n    case 'deviceUpdate':\r\n      updateDeviceData(data.payload)\r\n      break\r\n    case 'alert':\r\n      handleNewAlert(data.payload)\r\n      break\r\n    case 'stats':\r\n      updateDeviceStats(data.payload)\r\n      break\r\n  }\r\n}\r\n\r\n// 更新设备数据\r\nconst updateDeviceData = (deviceData) => {\r\n  const index = deviceList.value.findIndex(d => d.name === deviceData.name)\r\n  if (index !== -1) {\r\n    deviceList.value[index] = { ...deviceList.value[index], ...deviceData }\r\n  }\r\n}\r\n\r\n// 处理新告警\r\nconst handleNewAlert = (alert) => {\r\n  alerts.value.unshift({\r\n    ...alert,\r\n    unread: true\r\n  })\r\n  \r\n  // 限制告警列表长度\r\n  if (alerts.value.length > 50) {\r\n    alerts.value = alerts.value.slice(0, 50)\r\n  }\r\n\r\n  // 显示告警通知\r\n  ElMessage({\r\n    type: alert.level === 'error' ? 'error' : alert.level === 'warning' ? 'warning' : 'info',\r\n    message: `${alert.device}: ${alert.title}`,\r\n    duration: 5000\r\n  })\r\n}\r\n\r\n// 更新设备统计数据\r\nconst updateDeviceStats = (stats) => {\r\n  deviceStats.value = stats\r\n}\r\n\r\n// 组件挂载时初始化WebSocket\r\nonMounted(() => {\r\n  initWebSocket()\r\n})\r\n\r\n// 组件卸载时清理WebSocket\r\nonUnmounted(() => {\r\n  if (ws.value) {\r\n    ws.value.close()\r\n    ws.value = null\r\n  }\r\n  if (wsReconnectTimer.value) {\r\n    clearTimeout(wsReconnectTimer.value)\r\n  }\r\n})\r\n\r\n// 视图模式\r\nconst viewMode = ref('grid')\r\n\r\n// 设备统计数据\r\nconst deviceStats = ref({\r\n  online: 12,\r\n  offline: 3,\r\n  error: 1,\r\n  total: 16\r\n})\r\n\r\n// 设备列表数据\r\nconst deviceList = ref([\r\n  { \r\n    name: '传感器A', \r\n    type: '温湿度', \r\n    status: 'online', \r\n    location: '田块1',\r\n    latestData: '温度: 25°C, 湿度: 65%',\r\n    lastUpdate: '2024-03-15 14:30:00'\r\n  },\r\n  { \r\n    name: '摄像头B', \r\n    type: '视频监控', \r\n    status: 'offline', \r\n    location: '田块2',\r\n    latestData: '离线中',\r\n    lastUpdate: '2024-03-15 10:15:00'\r\n  },\r\n  { \r\n    name: '网关C', \r\n    type: '数据网关', \r\n    status: 'online', \r\n    location: '田块3',\r\n    latestData: '数据流量: 2.5MB/s',\r\n    lastUpdate: '2024-03-15 14:35:00'\r\n  },\r\n  { \r\n    name: '传感器D', \r\n    type: 'PH值', \r\n    status: 'error', \r\n    location: '田块4',\r\n    latestData: 'PH值: 异常',\r\n    lastUpdate: '2024-03-15 14:20:00'\r\n  }\r\n])\r\n\r\n// 告警数据\r\nconst alerts = ref([\r\n  {\r\n    id: 1,\r\n    title: 'PH值超出正常范围',\r\n    device: '传感器D',\r\n    time: '10分钟前',\r\n    level: 'error',\r\n    unread: true\r\n  },\r\n  {\r\n    id: 2,\r\n    title: '设备离线超过4小时',\r\n    device: '摄像头B',\r\n    time: '4小时前',\r\n    level: 'warning',\r\n    unread: true\r\n  },\r\n  {\r\n    id: 3,\r\n    title: '数据传输异常',\r\n    device: '网关C',\r\n    time: '2小时前',\r\n    level: 'info',\r\n    unread: false\r\n  }\r\n])\r\n\r\n// 搜索和筛选\r\nconst searchQuery = ref('')\r\nconst filterStatus = ref('')\r\nconst filterType = ref('')\r\n\r\nconst filteredDeviceList = computed(() => {\r\n  return deviceList.value.filter(device => {\r\n    const matchSearch = device.name.toLowerCase().includes(searchQuery.value.toLowerCase()) ||\r\n                       device.type.toLowerCase().includes(searchQuery.value.toLowerCase()) ||\r\n                       device.location.toLowerCase().includes(searchQuery.value.toLowerCase())\r\n    const matchStatus = !filterStatus.value || device.status === filterStatus.value\r\n    const matchType = !filterType.value || device.type === filterType.value\r\n    return matchSearch && matchStatus && matchType\r\n  })\r\n})\r\n\r\n// 设备详情相关\r\nconst showDetail = ref(false)\r\nconst currentDevice = ref(null)\r\nconst deviceAlerts = ref([\r\n  { time: '2024-03-15 14:20:00', title: 'PH值超出正常范围', level: 'error', status: '未处理' },\r\n  { time: '2024-03-15 10:15:00', title: '设备离线', level: 'warning', status: '已处理' },\r\n  { time: '2024-03-14 16:30:00', title: '数据异常', level: 'info', status: '已处理' }\r\n])\r\n\r\n// 新增设备相关\r\nconst showAddDeviceDialog = ref(false)\r\nconst deviceForm = ref(null)\r\nconst newDevice = ref({\r\n  name: '',\r\n  type: '',\r\n  location: ''\r\n})\r\n\r\nconst deviceRules = {\r\n  name: [\r\n    { required: true, message: '请输入设备名称', trigger: 'blur' },\r\n    { min: 2, max: 20, message: '长度在 2 到 20 个字符', trigger: 'blur' }\r\n  ],\r\n  type: [\r\n    { required: true, message: '请选择设备类型', trigger: 'change' }\r\n  ],\r\n  location: [\r\n    { required: true, message: '请输入安装位置', trigger: 'blur' }\r\n  ]\r\n}\r\n\r\n// 图表相关\r\nconst selectedDevice = ref('')\r\n/* 实时数据图表配置 */\r\nconst chartOptions = computed(() => ({\r\n  backgroundColor: 'transparent',\r\n  grid: {\r\n    top: 60,\r\n    right: 20,\r\n    bottom: 30,\r\n    left: 50,\r\n    containLabel: true\r\n  },\r\n  title: {\r\n    text: '实时数据趋势',\r\n    textStyle: {\r\n      color: 'rgba(255, 255, 255, 0.85)',\r\n      fontSize: 16,\r\n      fontWeight: 500\r\n    },\r\n    top: 20,\r\n    left: 20\r\n  },\r\n  tooltip: {\r\n    trigger: 'axis',\r\n    backgroundColor: 'rgba(13, 42, 77, 0.9)',\r\n    borderColor: 'rgba(30, 73, 118, 0.3)',\r\n    textStyle: {\r\n      color: '#fff'\r\n    }\r\n  },\r\n  legend: {\r\n    data: ['温度', '湿度', 'PH值'],\r\n    textStyle: {\r\n      color: 'rgba(255, 255, 255, 0.65)'\r\n    },\r\n    top: 20,\r\n    right: 20\r\n  },\r\n  xAxis: {\r\n    type: 'time',\r\n    axisLine: {\r\n      lineStyle: {\r\n        color: 'rgba(255, 255, 255, 0.1)'\r\n      }\r\n    },\r\n    axisLabel: {\r\n      color: 'rgba(255, 255, 255, 0.65)',\r\n      formatter: (value) => {\r\n        const date = new Date(value)\r\n        return `${date.getHours()}:${date.getMinutes().toString().padStart(2, '0')}`\r\n      }\r\n    },\r\n    splitLine: {\r\n      show: true,\r\n      lineStyle: {\r\n        color: 'rgba(255, 255, 255, 0.1)'\r\n      }\r\n    }\r\n  },\r\n  yAxis: {\r\n    type: 'value',\r\n    axisLine: {\r\n      lineStyle: {\r\n        color: 'rgba(255, 255, 255, 0.1)'\r\n      }\r\n    },\r\n    axisLabel: {\r\n      color: 'rgba(255, 255, 255, 0.65)'\r\n    },\r\n    splitLine: {\r\n      lineStyle: {\r\n        color: 'rgba(255, 255, 255, 0.1)'\r\n      }\r\n    }\r\n  },\r\n  series: [\r\n    {\r\n      name: '温度',\r\n      type: 'line',\r\n      smooth: true,\r\n      symbol: 'circle',\r\n      symbolSize: 8,\r\n      itemStyle: {\r\n        color: '#1890ff'\r\n      },\r\n      areaStyle: {\r\n        color: {\r\n          type: 'linear',\r\n          x: 0,\r\n          y: 0,\r\n          x2: 0,\r\n          y2: 1,\r\n          colorStops: [{\r\n            offset: 0,\r\n            color: 'rgba(24, 144, 255, 0.3)'\r\n          }, {\r\n            offset: 1,\r\n            color: 'rgba(24, 144, 255, 0.05)'\r\n          }]\r\n        }\r\n      },\r\n      data: generateTimeData(25, 2)\r\n    },\r\n    {\r\n      name: '湿度',\r\n      type: 'line',\r\n      smooth: true,\r\n      symbol: 'circle',\r\n      symbolSize: 8,\r\n      itemStyle: {\r\n        color: '#52c41a'\r\n      },\r\n      areaStyle: {\r\n        color: {\r\n          type: 'linear',\r\n          x: 0,\r\n          y: 0,\r\n          x2: 0,\r\n          y2: 1,\r\n          colorStops: [{\r\n            offset: 0,\r\n            color: 'rgba(82, 196, 26, 0.3)'\r\n          }, {\r\n            offset: 1,\r\n            color: 'rgba(82, 196, 26, 0.05)'\r\n          }]\r\n        }\r\n      },\r\n      data: generateTimeData(65, 5)\r\n    },\r\n    {\r\n      name: 'PH值',\r\n      type: 'line',\r\n      smooth: true,\r\n      symbol: 'circle',\r\n      symbolSize: 8,\r\n      itemStyle: {\r\n        color: '#faad14'\r\n      },\r\n      areaStyle: {\r\n        color: {\r\n          type: 'linear',\r\n          x: 0,\r\n          y: 0,\r\n          x2: 0,\r\n          y2: 1,\r\n          colorStops: [{\r\n            offset: 0,\r\n            color: 'rgba(250, 173, 20, 0.3)'\r\n          }, {\r\n            offset: 1,\r\n            color: 'rgba(250, 173, 20, 0.05)'\r\n          }]\r\n        }\r\n      },\r\n      data: generateTimeData(7, 0.5)\r\n    }\r\n  ]\r\n}))\r\n\r\nconst historyChartOptions = computed(() => ({\r\n  backgroundColor: 'transparent',\r\n  title: {\r\n    text: '历史数据趋势',\r\n    textStyle: { color: '#fff' }\r\n  },\r\n  tooltip: {\r\n    trigger: 'axis',\r\n    axisPointer: {\r\n      type: 'shadow'\r\n    }\r\n  },\r\n  legend: {\r\n    data: ['温度', '湿度', 'PH值'],\r\n    textStyle: { color: '#fff' },\r\n    top: 30\r\n  },\r\n  grid: {\r\n    top: 80,\r\n    right: 20,\r\n    bottom: 30,\r\n    left: 50,\r\n    containLabel: true\r\n  },\r\n  xAxis: {\r\n    type: 'category',\r\n    data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],\r\n    axisLabel: { color: '#fff' },\r\n    axisLine: {\r\n      lineStyle: {\r\n        color: '#8c8c8c'\r\n      }\r\n    }\r\n  },\r\n  yAxis: {\r\n    type: 'value',\r\n    axisLabel: { color: '#fff' },\r\n    splitLine: {\r\n      lineStyle: {\r\n        color: 'rgba(255, 255, 255, 0.1)'\r\n      }\r\n    },\r\n    axisLine: {\r\n      lineStyle: {\r\n        color: '#8c8c8c'\r\n      }\r\n    }\r\n  },\r\n  series: [\r\n    {\r\n      name: '温度',\r\n      type: 'bar',\r\n      data: [23, 24, 25, 23, 24, 26, 25],\r\n      itemStyle: {\r\n        color: {\r\n          type: 'linear',\r\n          x: 0,\r\n          y: 0,\r\n          x2: 0,\r\n          y2: 1,\r\n          colorStops: [{\r\n            offset: 0,\r\n            color: '#1890ff'\r\n          }, {\r\n            offset: 1,\r\n            color: 'rgba(24, 144, 255, 0.3)'\r\n          }]\r\n        }\r\n      }\r\n    },\r\n    {\r\n      name: '湿度',\r\n      type: 'bar',\r\n      data: [65, 63, 68, 64, 62, 65, 66],\r\n      itemStyle: {\r\n        color: {\r\n          type: 'linear',\r\n          x: 0,\r\n          y: 0,\r\n          x2: 0,\r\n          y2: 1,\r\n          colorStops: [{\r\n            offset: 0,\r\n            color: '#52c41a'\r\n          }, {\r\n            offset: 1,\r\n            color: 'rgba(82, 196, 26, 0.3)'\r\n          }]\r\n        }\r\n      }\r\n    },\r\n    {\r\n      name: 'PH值',\r\n      type: 'bar',\r\n      data: [7.1, 7.0, 7.2, 7.1, 7.0, 7.1, 7.2],\r\n      itemStyle: {\r\n        color: {\r\n          type: 'linear',\r\n          x: 0,\r\n          y: 0,\r\n          x2: 0,\r\n          y2: 1,\r\n          colorStops: [{\r\n            offset: 0,\r\n            color: '#faad14'\r\n          }, {\r\n            offset: 1,\r\n            color: 'rgba(250, 173, 20, 0.3)'\r\n          }]\r\n        }\r\n      }\r\n    }\r\n  ]\r\n}))\r\n\r\n// 生成时间序列数据\r\nfunction generateTimeData(baseValue, variance) {\r\n  const now = new Date()\r\n  const data = []\r\n  for (let i = 0; i < 60; i++) {\r\n    const time = new Date(now - (59 - i) * 60000)\r\n    data.push([\r\n      time.toISOString(),\r\n      +(baseValue + (Math.random() * 2 - 1) * variance).toFixed(1)\r\n    ])\r\n  }\r\n  return data\r\n}\r\n\r\n// 告警相关\r\n// Removing duplicate alerts declaration since it's already defined above\r\n// const alerts = ref([...])\r\n\r\n// 处理告警\r\nfunction handleAlert(alert) {\r\n  alert.unread = false\r\n  ElMessage.success(`已处理告警：${alert.title}`)\r\n}\r\n\r\n// 方法\r\nfunction getDeviceIcon(type) {\r\n  return {\r\n    '温湿度': 'temperature',\r\n    'PH值': 'experiment',\r\n    '视频监控': 'video-camera',\r\n    '数据网关': 'connection'\r\n  }[type] || 'monitor'\r\n}\r\n\r\nfunction getDeviceTagType(type) {\r\n  return {\r\n    '温湿度': '',\r\n    'PH值': 'warning',\r\n    '视频监控': 'success',\r\n    '数据网关': 'info'\r\n  }[type] || 'info'\r\n}\r\n\r\nfunction getStatusText(status) {\r\n  return {\r\n    online: '在线',\r\n    offline: '离线',\r\n    error: '异常'\r\n  }[status] || status\r\n}\r\n\r\nfunction getAlertTagType(level) {\r\n  return {\r\n    error: 'danger',\r\n    warning: 'warning',\r\n    info: 'info'\r\n  }[level] || 'info'\r\n}\r\n\r\nfunction viewDetail(device) {\r\n  currentDevice.value = device\r\n  showDetail.value = true\r\n}\r\n\r\nfunction configDevice(device) {\r\n  ElMessage.info(`配置设备: ${device.name}`)\r\n}\r\n\r\nfunction deleteDevice(device) {\r\n  ElMessageBox.confirm(\r\n    `确定要删除设备 ${device.name} 吗？`,\r\n    '警告',\r\n    {\r\n      confirmButtonText: '确定',\r\n      cancelButtonText: '取消',\r\n      type: 'warning'\r\n    }\r\n  ).then(() => {\r\n    deviceList.value = deviceList.value.filter(d => d !== device)\r\n    ElMessage.success('删除成功')\r\n  }).catch(() => {})\r\n}\r\n\r\nfunction showAddDevice() {\r\n  showAddDeviceDialog.value = true\r\n}\r\n\r\nfunction submitNewDevice() {\r\n  deviceForm.value?.validate((valid) => {\r\n    if (valid) {\r\n      const device = {\r\n        ...newDevice.value,\r\n        status: 'online',\r\n        latestData: '暂无数据',\r\n        lastUpdate: new Date().toLocaleString()\r\n      }\r\n      deviceList.value.push(device)\r\n      showAddDeviceDialog.value = false\r\n      ElMessage.success('添加成功')\r\n      newDevice.value = {\r\n        name: '',\r\n        type: '',\r\n        location: ''\r\n      }\r\n    }\r\n  })\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.monitoring-view {\r\n  height: 100%;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 20px;\r\n  box-sizing: border-box;\r\n  background: var(--el-bg-color);\r\n\r\n  .stats-section {\r\n    display: grid;\r\n    grid-template-columns: repeat(4, 1fr);\r\n    gap: 20px;\r\n    margin-bottom: 20px;\r\n    flex-shrink: 0;\r\n  }\r\n\r\n  .main-content {\r\n    flex: 1;\r\n    display: flex;\r\n    gap: 20px;\r\n    min-height: 0; // Important for nested flex scrolling\r\n    overflow: hidden;\r\n\r\n    .content-main {\r\n      flex: 1;\r\n      overflow: hidden;\r\n      display: flex;\r\n      flex-direction: column;\r\n      min-width: 0; // Prevent flex items from overflowing\r\n\r\n      .device-list-panel {\r\n        flex: 1;\r\n        display: flex;\r\n        flex-direction: column;\r\n        overflow: hidden;\r\n        background: var(--el-bg-color-overlay);\r\n        border-radius: 8px;\r\n        box-shadow: var(--el-box-shadow-light);\r\n\r\n        .panel-header {\r\n          padding: 16px;\r\n          flex-shrink: 0;\r\n          border-bottom: 1px solid var(--el-border-color-light);\r\n          background: var(--el-bg-color);\r\n          z-index: 1;\r\n\r\n          .header-left {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 16px;\r\n            margin-bottom: 16px;\r\n\r\n            h3 {\r\n              margin: 0;\r\n              font-size: 18px;\r\n              color: var(--el-text-color-primary);\r\n            }\r\n          }\r\n\r\n          .header-right {\r\n            display: flex;\r\n            gap: 12px;\r\n            flex-wrap: wrap;\r\n          }\r\n        }\r\n\r\n        .device-grid {\r\n          flex: 1;\r\n          overflow-y: auto;\r\n          padding: 16px;\r\n          display: grid;\r\n          grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\r\n          gap: 16px;\r\n          scrollbar-width: thin;\r\n          scrollbar-color: var(--el-border-color-light) transparent;\r\n\r\n          &::-webkit-scrollbar {\r\n            width: 6px;\r\n          }\r\n\r\n          &::-webkit-scrollbar-thumb {\r\n            background-color: var(--el-border-color-light);\r\n            border-radius: 3px;\r\n          }\r\n\r\n          &::-webkit-scrollbar-track {\r\n            background-color: transparent;\r\n          }\r\n        }\r\n\r\n        .el-table {\r\n          flex: 1;\r\n          overflow-y: auto;\r\n\r\n          :deep(.el-table__body-wrapper) {\r\n            overflow-y: auto;\r\n            height: calc(100vh - 300px);\r\n            scrollbar-width: thin;\r\n            scrollbar-color: var(--el-border-color-light) transparent;\r\n\r\n            &::-webkit-scrollbar {\r\n              width: 6px;\r\n            }\r\n\r\n            &::-webkit-scrollbar-thumb {\r\n              background-color: var(--el-border-color-light);\r\n              border-radius: 3px;\r\n            }\r\n\r\n            &::-webkit-scrollbar-track {\r\n              background-color: transparent;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .content-side {\r\n      width: 360px;\r\n      flex-shrink: 0;\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: 20px;\r\n      overflow-y: auto;\r\n      scrollbar-width: thin;\r\n      scrollbar-color: var(--el-border-color-light) transparent;\r\n\r\n      &::-webkit-scrollbar {\r\n        width: 6px;\r\n      }\r\n\r\n      &::-webkit-scrollbar-thumb {\r\n        background-color: var(--el-border-color-light);\r\n        border-radius: 3px;\r\n      }\r\n\r\n      &::-webkit-scrollbar-track {\r\n        background-color: transparent;\r\n      }\r\n\r\n      .side-panel {\r\n        background: var(--el-bg-color-overlay);\r\n        border-radius: 8px;\r\n        box-shadow: var(--el-box-shadow-light);\r\n        overflow: hidden;\r\n\r\n        .panel-header {\r\n          padding: 16px;\r\n          border-bottom: 1px solid var(--el-border-color-light);\r\n          background: var(--el-bg-color);\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n\r\n          h3 {\r\n            margin: 0;\r\n            font-size: 16px;\r\n            color: var(--el-text-color-primary);\r\n          }\r\n        }\r\n\r\n        .chart-container {\r\n          height: 300px;\r\n          padding: 16px;\r\n        }\r\n\r\n        .alert-list {\r\n          max-height: 400px;\r\n          overflow-y: auto;\r\n          padding: 16px;\r\n          scrollbar-width: thin;\r\n          scrollbar-color: var(--el-border-color-light) transparent;\r\n\r\n          &::-webkit-scrollbar {\r\n            width: 6px;\r\n          }\r\n\r\n          &::-webkit-scrollbar-thumb {\r\n            background-color: var(--el-border-color-light);\r\n            border-radius: 3px;\r\n          }\r\n\r\n          &::-webkit-scrollbar-track {\r\n            background-color: transparent;\r\n          }\r\n\r\n          .alert-item {\r\n            display: flex;\r\n            align-items: center;\r\n            gap: 12px;\r\n            padding: 12px;\r\n            border-radius: 6px;\r\n            background: var(--el-bg-color);\r\n            margin-bottom: 8px;\r\n            cursor: pointer;\r\n            transition: all 0.3s ease;\r\n\r\n            &:hover {\r\n              transform: translateY(-2px);\r\n              box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);\r\n            }\r\n\r\n            &:last-child {\r\n              margin-bottom: 0;\r\n            }\r\n\r\n            .alert-icon {\r\n              width: 40px;\r\n              height: 40px;\r\n              border-radius: 20px;\r\n              display: flex;\r\n              align-items: center;\r\n              justify-content: center;\r\n              flex-shrink: 0;\r\n\r\n              .el-icon {\r\n                font-size: 20px;\r\n              }\r\n            }\r\n\r\n            .alert-content {\r\n              flex: 1;\r\n              min-width: 0;\r\n\r\n              .alert-title {\r\n                font-size: 14px;\r\n                color: var(--el-text-color-primary);\r\n                margin-bottom: 4px;\r\n                white-space: nowrap;\r\n                overflow: hidden;\r\n                text-overflow: ellipsis;\r\n              }\r\n\r\n              .alert-info {\r\n                display: flex;\r\n                align-items: center;\r\n                gap: 8px;\r\n                font-size: 12px;\r\n                color: var(--el-text-color-secondary);\r\n\r\n                .alert-device {\r\n                  flex-shrink: 0;\r\n                }\r\n\r\n                .alert-time {\r\n                  color: var(--el-text-color-secondary);\r\n                }\r\n              }\r\n            }\r\n\r\n            &.error {\r\n              .alert-icon {\r\n                background: var(--el-color-danger-light-9);\r\n                color: var(--el-color-danger);\r\n              }\r\n            }\r\n\r\n            &.warning {\r\n              .alert-icon {\r\n                background: var(--el-color-warning-light-9);\r\n                color: var(--el-color-warning);\r\n              }\r\n            }\r\n\r\n            &.info {\r\n              .alert-icon {\r\n                background: var(--el-color-info-light-9);\r\n                color: var(--el-color-info);\r\n              }\r\n            }\r\n\r\n            &.unread {\r\n              background: var(--el-color-primary-light-9);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.stat-card {\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border-radius: 16px;\r\n  padding: 24px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n  backdrop-filter: blur(10px);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  transition: all 0.3s ease;\r\n\r\n  &:hover {\r\n    transform: translateY(-2px);\r\n    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);\r\n    background: rgba(255, 255, 255, 0.08);\r\n  }\r\n\r\n  .stat-icon {\r\n    width: 56px;\r\n    height: 56px;\r\n    border-radius: 16px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    font-size: 28px;\r\n    transition: all 0.3s ease;\r\n  }\r\n\r\n  .stat-content {\r\n    flex: 1;\r\n\r\n    .stat-value {\r\n      font-size: 32px;\r\n      font-weight: 600;\r\n      line-height: 1.2;\r\n      margin-bottom: 8px;\r\n      background: linear-gradient(120deg, #fff, rgba(255, 255, 255, 0.7));\r\n      -webkit-background-clip: text;\r\n      -webkit-text-fill-color: transparent;\r\n    }\r\n\r\n    .stat-label {\r\n      font-size: 14px;\r\n      color: rgba(255, 255, 255, 0.65);\r\n      letter-spacing: 0.5px;\r\n    }\r\n  }\r\n\r\n  .stat-trend {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 6px;\r\n    font-size: 14px;\r\n    padding: 6px 12px;\r\n    border-radius: 12px;\r\n    transition: all 0.3s ease;\r\n\r\n    &.up {\r\n      background: rgba(82, 196, 26, 0.15);\r\n      color: #52c41a;\r\n    }\r\n\r\n    &.down {\r\n      background: rgba(255, 77, 79, 0.15);\r\n      color: #ff4d4f;\r\n    }\r\n\r\n    .el-icon {\r\n      font-size: 16px;\r\n    }\r\n  }\r\n\r\n  &.online .stat-icon {\r\n    background: rgba(82, 196, 26, 0.15);\r\n    color: #52c41a;\r\n  }\r\n\r\n  &.offline .stat-icon {\r\n    background: rgba(140, 140, 140, 0.15);\r\n    color: #8c8c8c;\r\n  }\r\n\r\n  &.error .stat-icon {\r\n    background: rgba(255, 77, 79, 0.15);\r\n    color: #ff4d4f;\r\n  }\r\n\r\n  &.total .stat-icon {\r\n    background: rgba(24, 144, 255, 0.15);\r\n    color: #1890ff;\r\n  }\r\n}\r\n\r\n.main-content {\r\n  flex: 1;\r\n  display: grid;\r\n  grid-template-columns: 1fr 380px;\r\n  gap: 24px;\r\n  min-height: 0;\r\n}\r\n\r\n.content-main {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24px;\r\n  min-width: 0;\r\n}\r\n\r\n.content-side {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24px;\r\n\r\n  .side-panel {\r\n    background: rgba(13, 42, 77, 0.5);\r\n    border-radius: 16px;\r\n    backdrop-filter: blur(10px);\r\n    border: 1px solid rgba(30, 73, 118, 0.3);\r\n    overflow: hidden;\r\n    transition: all 0.3s ease;\r\n\r\n    &:hover {\r\n      background: rgba(18, 50, 89, 0.5);\r\n      border-color: rgba(30, 73, 118, 0.5);\r\n      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);\r\n    }\r\n\r\n    .chart-container {\r\n      padding: 20px;\r\n      height: 300px;\r\n      background: rgba(13, 42, 77, 0.3);\r\n    }\r\n  }\r\n}\r\n\r\n.panel {\r\n  background: rgba(13, 42, 77, 0.5);\r\n  border-radius: 16px;\r\n  backdrop-filter: blur(10px);\r\n  border: 1px solid rgba(30, 73, 118, 0.3);\r\n  overflow: hidden;\r\n  transition: all 0.3s ease;\r\n\r\n  &:hover {\r\n    background: rgba(18, 50, 89, 0.5);\r\n    border-color: rgba(30, 73, 118, 0.5);\r\n    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);\r\n  }\r\n}\r\n\r\n.device-list-panel {\r\n  @extend .panel;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n  .panel-header {\r\n    padding: 20px;\r\n    border-bottom: 1px solid rgba(30, 73, 118, 0.3);\r\n\r\n    .header-left {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 16px;\r\n\r\n      h3 {\r\n        margin: 0;\r\n        font-size: 18px;\r\n        font-weight: 600;\r\n        background: linear-gradient(120deg, #fff, rgba(255, 255, 255, 0.7));\r\n        -webkit-background-clip: text;\r\n        -webkit-text-fill-color: transparent;\r\n      }\r\n\r\n      .el-button-group {\r\n        .el-button {\r\n          background: rgba(24, 144, 255, 0.1);\r\n          border-color: rgba(24, 144, 255, 0.2);\r\n          color: #1890ff;\r\n\r\n          &:hover {\r\n            background: rgba(24, 144, 255, 0.2);\r\n            border-color: rgba(24, 144, 255, 0.3);\r\n          }\r\n\r\n          &.active {\r\n            background: rgba(24, 144, 255, 0.3);\r\n            border-color: rgba(24, 144, 255, 0.4);\r\n            color: #fff;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .header-right {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 12px;\r\n      margin-top: 16px;\r\n\r\n      .el-input {\r\n        .el-input__wrapper {\r\n          background: rgba(0, 0, 0, 0.2);\r\n          border-color: rgba(255, 255, 255, 0.1);\r\n          box-shadow: none;\r\n\r\n          &:hover {\r\n            border-color: rgba(24, 144, 255, 0.3);\r\n          }\r\n\r\n          &.is-focus {\r\n            border-color: #1890ff;\r\n            box-shadow: 0 0 0 1px #1890ff;\r\n          }\r\n        }\r\n      }\r\n\r\n      .el-select {\r\n        .el-input__wrapper {\r\n          background: rgba(0, 0, 0, 0.2);\r\n          border-color: rgba(255, 255, 255, 0.1);\r\n          box-shadow: none;\r\n\r\n          &:hover {\r\n            border-color: rgba(24, 144, 255, 0.3);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .device-grid {\r\n    padding: 20px;\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\r\n    gap: 20px;\r\n    overflow-y: auto;\r\n    flex: 1;\r\n\r\n    &::-webkit-scrollbar {\r\n      width: 6px;\r\n    }\r\n\r\n    &::-webkit-scrollbar-thumb {\r\n      background: rgba(255, 255, 255, 0.2);\r\n      border-radius: 3px;\r\n    }\r\n\r\n    &::-webkit-scrollbar-track {\r\n      background: rgba(0, 0, 0, 0.1);\r\n    }\r\n\r\n    .device-card {\r\n      background: rgba(0, 0, 0, 0.2);\r\n      border-radius: 12px;\r\n      border: 1px solid rgba(255, 255, 255, 0.05);\r\n      transition: all 0.3s ease;\r\n\r\n      &:hover {\r\n        transform: translateY(-2px);\r\n        border-color: rgba(24, 144, 255, 0.3);\r\n        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\r\n      }\r\n\r\n      .device-card-header {\r\n        padding: 16px;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n        border-bottom: 1px solid rgba(255, 255, 255, 0.05);\r\n\r\n        .device-icon {\r\n          width: 40px;\r\n          height: 40px;\r\n          border-radius: 10px;\r\n          background: rgba(24, 144, 255, 0.1);\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          color: #1890ff;\r\n          font-size: 20px;\r\n        }\r\n\r\n        .device-status {\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 6px;\r\n          font-size: 14px;\r\n          padding: 4px 12px;\r\n          border-radius: 12px;\r\n          background: rgba(0, 0, 0, 0.2);\r\n\r\n          .status-dot {\r\n            width: 8px;\r\n            height: 8px;\r\n            border-radius: 50%;\r\n          }\r\n        }\r\n      }\r\n\r\n      .device-card-content {\r\n        padding: 16px;\r\n\r\n        .device-name {\r\n          font-size: 16px;\r\n          font-weight: 500;\r\n          margin-bottom: 8px;\r\n          color: #fff;\r\n        }\r\n\r\n        .device-type {\r\n          margin-bottom: 8px;\r\n        }\r\n\r\n        .device-location {\r\n          font-size: 14px;\r\n          color: rgba(255, 255, 255, 0.65);\r\n          margin-bottom: 12px;\r\n        }\r\n\r\n        .device-data {\r\n          font-size: 14px;\r\n          color: rgba(255, 255, 255, 0.85);\r\n          padding: 8px 12px;\r\n          background: rgba(0, 0, 0, 0.2);\r\n          border-radius: 8px;\r\n        }\r\n      }\r\n\r\n      .device-card-footer {\r\n        padding: 12px 16px;\r\n        border-top: 1px solid rgba(255, 255, 255, 0.05);\r\n        display: flex;\r\n        justify-content: flex-end;\r\n\r\n        .el-button-group {\r\n          .el-button {\r\n            background: rgba(0, 0, 0, 0.2);\r\n            border-color: rgba(255, 255, 255, 0.1);\r\n\r\n            &:hover {\r\n              background: rgba(24, 144, 255, 0.1);\r\n              border-color: rgba(24, 144, 255, 0.2);\r\n            }\r\n\r\n            &.el-button--primary {\r\n              background: rgba(24, 144, 255, 0.2);\r\n              border-color: rgba(24, 144, 255, 0.3);\r\n\r\n              &:hover {\r\n                background: rgba(24, 144, 255, 0.3);\r\n                border-color: rgba(24, 144, 255, 0.4);\r\n              }\r\n            }\r\n\r\n            &.el-button--danger {\r\n              background: rgba(255, 77, 79, 0.1);\r\n              border-color: rgba(255, 77, 79, 0.2);\r\n              color: #ff4d4f;\r\n\r\n              &:hover {\r\n                background: rgba(255, 77, 79, 0.2);\r\n                border-color: rgba(255, 77, 79, 0.3);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      &.online {\r\n        .status-dot {\r\n          background: #52c41a;\r\n          box-shadow: 0 0 8px rgba(82, 196, 26, 0.4);\r\n        }\r\n        .device-status {\r\n          color: #52c41a;\r\n        }\r\n      }\r\n\r\n      &.offline {\r\n        .status-dot {\r\n          background: #8c8c8c;\r\n          box-shadow: 0 0 8px rgba(140, 140, 140, 0.4);\r\n        }\r\n        .device-status {\r\n          color: #8c8c8c;\r\n        }\r\n      }\r\n\r\n      &.error {\r\n        .status-dot {\r\n          background: #ff4d4f;\r\n          box-shadow: 0 0 8px rgba(255, 77, 79, 0.4);\r\n        }\r\n        .device-status {\r\n          color: #ff4d4f;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  .el-table {\r\n    background: transparent;\r\n    \r\n    &::before {\r\n      display: none;\r\n    }\r\n\r\n    .el-table__header {\r\n      th {\r\n        background: rgba(0, 0, 0, 0.2);\r\n        border-bottom: 1px solid rgba(255, 255, 255, 0.1);\r\n        color: rgba(255, 255, 255, 0.85);\r\n        font-weight: 500;\r\n      }\r\n    }\r\n\r\n    .el-table__body {\r\n      td {\r\n        background: transparent;\r\n        border-bottom: 1px solid rgba(255, 255, 255, 0.05);\r\n        color: rgba(255, 255, 255, 0.85);\r\n        transition: all 0.3s ease;\r\n      }\r\n\r\n      tr:hover td {\r\n        background: rgba(255, 255, 255, 0.05);\r\n      }\r\n    }\r\n\r\n    .device-name {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 8px;\r\n\r\n      .el-icon {\r\n        font-size: 18px;\r\n        color: #1890ff;\r\n      }\r\n    }\r\n\r\n    .status-indicator {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 6px;\r\n      \r\n      .status-dot {\r\n        width: 8px;\r\n        height: 8px;\r\n        border-radius: 50%;\r\n      }\r\n\r\n      &.online {\r\n        .status-dot {\r\n          background: #52c41a;\r\n          box-shadow: 0 0 8px rgba(82, 196, 26, 0.4);\r\n        }\r\n        color: #52c41a;\r\n      }\r\n\r\n      &.offline {\r\n        .status-dot {\r\n          background: #8c8c8c;\r\n          box-shadow: 0 0 8px rgba(140, 140, 140, 0.4);\r\n        }\r\n        color: #8c8c8c;\r\n      }\r\n\r\n      &.error {\r\n        .status-dot {\r\n          background: #ff4d4f;\r\n          box-shadow: 0 0 8px rgba(255, 77, 79, 0.4);\r\n        }\r\n        color: #ff4d4f;\r\n      }\r\n    }\r\n\r\n    .latest-data {\r\n      color: rgba(255, 255, 255, 0.85);\r\n    }\r\n  }\r\n}\r\n\r\n/* 图表样式覆盖 */\r\n:deep(.echarts) {\r\n  background: transparent !important;\r\n  \r\n  .ec-canvas {\r\n    background: transparent !important;\r\n  }\r\n}\r\n\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}