{"ast":null,"code":"import { ref, computed } from 'vue';\nimport { useRouter, useRoute } from 'vue-router';\nimport { useStore } from 'vuex';\nimport { Monitor, VideoCamera, DataLine, Files, TrendCharts, User, Setting, SwitchButton, CaretBottom, Loading, More, ArrowDown } from '@element-plus/icons-vue';\nimport PhotoTimeline from '@/assets/water/1.vue';\nexport default {\n  name: 'MainLayout',\n  components: {\n    Monitor,\n    VideoCamera,\n    DataLine,\n    Files,\n    TrendCharts,\n    User,\n    Setting,\n    SwitchButton,\n    CaretBottom,\n    Loading,\n    More,\n    ArrowDown,\n    PhotoTimeline\n  },\n  setup() {\n    const router = useRouter();\n    const route = useRoute();\n    const store = useStore();\n    const userAvatar = ref('https://avatars.githubusercontent.com/u/1?v=4');\n    const username = ref('Admin');\n    const isTimelineCollapsed = ref(false);\n    const activeMenu = computed(() => route.path);\n    const currentRoute = computed(() => {\n      const routeMap = {\n        '/overview': '实时监测',\n        '/monitoring': '智能预测',\n        '/analysis': '趋势分析',\n        '/management': '数据管理',\n        '/evaluation': '预警评估'\n      };\n      return routeMap[route.path] || '未知页面';\n    });\n    const handleMenuSelect = index => {\n      router.push(index);\n    };\n    const goToProfile = () => {\n      router.push('/profile');\n    };\n    const goToSettings = () => {\n      router.push('/settings');\n    };\n    const handleLogout = async () => {\n      try {\n        await store.dispatch('auth/logout');\n        router.push('/login');\n      } catch (error) {\n        console.error('Logout failed:', error);\n      }\n    };\n    const toggleTimeline = () => {\n      isTimelineCollapsed.value = !isTimelineCollapsed.value;\n    };\n    return {\n      userAvatar,\n      username,\n      activeMenu,\n      currentRoute,\n      handleMenuSelect,\n      goToProfile,\n      goToSettings,\n      handleLogout,\n      isTimelineCollapsed,\n      toggleTimeline\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","useRouter","useRoute","useStore","Monitor","VideoCamera","DataLine","Files","TrendCharts","User","Setting","SwitchButton","CaretBottom","Loading","More","ArrowDown","PhotoTimeline","name","components","setup","router","route","store","userAvatar","username","isTimelineCollapsed","activeMenu","path","currentRoute","routeMap","handleMenuSelect","index","push","goToProfile","goToSettings","handleLogout","dispatch","error","console","toggleTimeline","value"],"sources":["D:\\restore\\water-melt\\frontend\\src\\layouts\\MainLayout.vue"],"sourcesContent":["<!-- 主布局组件 -->\n<template>\n  <div class=\"main-layout\">\n    <!-- 顶部导航栏 -->\n    <div class=\"header\">\n      <div class=\"header-left\">\n        <div class=\"logo\">\n          <h1 class=\"logo-text\">智能先知</h1>\n        </div>\n        <div class=\"subtitle\">多变量土湿预测监测系统</div>\n      </div>\n      <div class=\"nav-container\">\n        <el-menu\n          :default-active=\"activeMenu\"\n          mode=\"horizontal\"\n          class=\"main-menu\"\n          background-color=\"transparent\"\n          text-color=\"rgba(255, 255, 255, 0.85)\"\n          active-text-color=\"#40a9ff\"\n          @select=\"handleMenuSelect\"\n        >\n          <el-menu-item index=\"/overview\">\n            <el-icon><Monitor /></el-icon>\n            <span>实时监测</span>\n          </el-menu-item>\n          <el-menu-item index=\"/monitoring\">\n            <el-icon><VideoCamera /></el-icon>\n            <span>智能预测</span>\n          </el-menu-item>\n          <el-menu-item index=\"/analysis\">\n            <el-icon><DataLine /></el-icon>\n            <span>趋势分析</span>\n          </el-menu-item>\n          <el-menu-item index=\"/management\">\n            <el-icon><Files /></el-icon>\n            <span>数据管理</span>\n          </el-menu-item>\n          <el-menu-item index=\"/evaluation\">\n            <el-icon><TrendCharts /></el-icon>\n            <span>预警评估</span>\n          </el-menu-item>\n          <el-menu-item index=\"/more\">\n            <el-icon><More /></el-icon>\n          </el-menu-item>\n        </el-menu>\n      </div>\n      <div class=\"header-right\">\n        <div class=\"system-status\">\n          <el-tag size=\"small\" type=\"success\" effect=\"plain\" class=\"status-tag\">\n            <el-icon class=\"status-icon\"><Loading /></el-icon>\n            <span>系统运行正常</span>\n          </el-tag>\n        </div>\n        <div class=\"nav-links\">\n          <router-link to=\"/\" class=\"nav-link\">首页</router-link>\n          <span class=\"separator\">/</span>\n          <span class=\"current-page\">{{ currentRoute }}</span>\n        </div>\n        <div class=\"user-info\">\n          <el-dropdown trigger=\"click\">\n            <div class=\"user-profile\">\n              <el-avatar :size=\"32\" :src=\"userAvatar\" />\n              <span class=\"username\">{{ username }}</span>\n              <el-icon class=\"dropdown-icon\"><CaretBottom /></el-icon>\n            </div>\n            <template #dropdown>\n              <el-dropdown-menu>\n                <el-dropdown-item @click=\"goToProfile\">\n                  <el-icon><User /></el-icon>个人信息\n                </el-dropdown-item>\n                <el-dropdown-item @click=\"goToSettings\">\n                  <el-icon><Setting /></el-icon>系统设置\n                </el-dropdown-item>\n                <el-dropdown-item divided @click=\"handleLogout\">\n                  <el-icon><SwitchButton /></el-icon>退出登录\n                </el-dropdown-item>\n              </el-dropdown-menu>\n            </template>\n          </el-dropdown>\n        </div>\n      </div>\n    </div>\n\n    <!-- 主内容区 -->\n    <div class=\"main-container\">\n      <div class=\"content\">\n        <router-view v-slot=\"{ Component }\">\n          <transition name=\"fade\" mode=\"out-in\">\n            <component :is=\"Component\" />\n          </transition>\n        </router-view>\n      </div>\n      <!-- 图片时间轴 -->\n      <div class=\"timeline-container\" :class=\"{ 'timeline-collapsed': isTimelineCollapsed }\">\n        <div class=\"timeline-toggle\" @click=\"toggleTimeline\">\n          <el-icon :class=\"{ 'is-rotate': !isTimelineCollapsed }\"><ArrowDown /></el-icon>\n        </div>\n        <PhotoTimeline v-show=\"!isTimelineCollapsed\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, computed } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { useStore } from 'vuex'\nimport {\n  Monitor,\n  VideoCamera,\n  DataLine,\n  Files,\n  TrendCharts,\n  User,\n  Setting,\n  SwitchButton,\n  CaretBottom,\n  Loading,\n  More,\n  ArrowDown\n} from '@element-plus/icons-vue'\nimport PhotoTimeline from '@/assets/water/1.vue'\n\nexport default {\n  name: 'MainLayout',\n  components: {\n    Monitor,\n    VideoCamera,\n    DataLine,\n    Files,\n    TrendCharts,\n    User,\n    Setting,\n    SwitchButton,\n    CaretBottom,\n    Loading,\n    More,\n    ArrowDown,\n    PhotoTimeline\n  },\n  setup() {\n    const router = useRouter()\n    const route = useRoute()\n    const store = useStore()\n\n    const userAvatar = ref('https://avatars.githubusercontent.com/u/1?v=4')\n    const username = ref('Admin')\n    const isTimelineCollapsed = ref(false)\n\n    const activeMenu = computed(() => route.path)\n    const currentRoute = computed(() => {\n      const routeMap = {\n        '/overview': '实时监测',\n        '/monitoring': '智能预测',\n        '/analysis': '趋势分析',\n        '/management': '数据管理',\n        '/evaluation': '预警评估'\n      }\n      return routeMap[route.path] || '未知页面'\n    })\n\n    const handleMenuSelect = (index) => {\n      router.push(index)\n    }\n\n    const goToProfile = () => {\n      router.push('/profile')\n    }\n\n    const goToSettings = () => {\n      router.push('/settings')\n    }\n\n    const handleLogout = async () => {\n      try {\n        await store.dispatch('auth/logout')\n        router.push('/login')\n      } catch (error) {\n        console.error('Logout failed:', error)\n      }\n    }\n\n    const toggleTimeline = () => {\n      isTimelineCollapsed.value = !isTimelineCollapsed.value\n    }\n\n    return {\n      userAvatar,\n      username,\n      activeMenu,\n      currentRoute,\n      handleMenuSelect,\n      goToProfile,\n      goToSettings,\n      handleLogout,\n      isTimelineCollapsed,\n      toggleTimeline\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/styles/variables.scss';\n\n.main-layout {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  background: linear-gradient(180deg, #001529 0%, #002140 100%);\n\n  .header {\n    height: 56px;\n    background: rgba(0, 21, 41, 0.95);\n    padding: 0 24px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    z-index: $zindex-fixed;\n    box-shadow: 0 1px 4px rgba(0, 0, 0, 0.12);\n\n    .header-left {\n      display: flex;\n      align-items: center;\n      gap: 12px;\n      min-width: 220px;\n\n      .logo {\n        .logo-text {\n          font-size: 20px;\n          font-weight: 600;\n          color: #fff;\n          margin: 0;\n        }\n      }\n\n      .subtitle {\n        font-size: 12px;\n        color: rgba(255, 255, 255, 0.65);\n        font-weight: normal;\n      }\n    }\n\n    .nav-container {\n      flex: 1;\n      display: flex;\n      justify-content: center;\n\n      .main-menu {\n        border: none;\n        display: flex;\n        background: transparent;\n        justify-content: center;\n\n        :deep(.el-menu-item) {\n          height: 56px;\n          line-height: 56px;\n          padding: 0 20px;\n          font-size: 14px;\n          color: rgba(255, 255, 255, 0.85);\n          border-bottom: 2px solid transparent;\n          transition: all 0.3s;\n\n          &.is-active {\n            color: #40a9ff;\n            background: rgba(24, 144, 255, 0.1);\n            border-bottom-color: #40a9ff;\n\n            .el-icon {\n              color: #40a9ff;\n            }\n          }\n\n          &:hover {\n            color: #40a9ff;\n            background: rgba(24, 144, 255, 0.1);\n\n            .el-icon {\n              color: #40a9ff;\n            }\n          }\n\n          .el-icon {\n            margin-right: 6px;\n            font-size: 16px;\n            color: rgba(255, 255, 255, 0.85);\n          }\n\n          &:last-child {\n            padding: 0 12px;\n            margin-left: 8px;\n\n            .el-icon {\n              margin-right: 0;\n            }\n          }\n        }\n      }\n    }\n\n    .header-right {\n      display: flex;\n      align-items: center;\n      gap: 24px;\n      min-width: 220px;\n      justify-content: flex-end;\n\n      .system-status {\n        .status-tag {\n          display: flex;\n          align-items: center;\n          gap: 4px;\n          height: 24px;\n          padding: 0 8px;\n          background: rgba(82, 196, 26, 0.1);\n          border: none;\n          color: #52c41a;\n\n          .status-icon {\n            font-size: 12px;\n            animation: rotate 2s linear infinite;\n          }\n\n          span {\n            font-size: 12px;\n          }\n        }\n      }\n\n      .nav-links {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        font-size: 12px;\n\n        .nav-link {\n          color: rgba(255, 255, 255, 0.85);\n          text-decoration: none;\n          transition: color 0.3s;\n\n          &:hover {\n            color: #40a9ff;\n          }\n        }\n\n        .separator {\n          color: rgba(255, 255, 255, 0.45);\n        }\n\n        .current-page {\n          color: rgba(255, 255, 255, 0.65);\n        }\n      }\n\n      .user-info {\n        .user-profile {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          cursor: pointer;\n          padding: 4px 8px;\n          border-radius: 4px;\n          transition: all 0.3s;\n\n          &:hover {\n            background: rgba(255, 255, 255, 0.08);\n\n            .dropdown-icon {\n              transform: rotate(180deg);\n            }\n          }\n\n          .el-avatar {\n            width: 24px;\n            height: 24px;\n          }\n\n          .username {\n            font-size: 12px;\n            color: rgba(255, 255, 255, 0.85);\n          }\n\n          .dropdown-icon {\n            font-size: 12px;\n            color: rgba(255, 255, 255, 0.65);\n            transition: transform 0.3s;\n          }\n        }\n      }\n    }\n  }\n\n  .main-container {\n    flex: 1;\n    margin-top: 56px;\n    background: #001529;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n\n    .content {\n      flex: 1;\n      padding: 24px;\n      overflow-y: auto;\n\n      &::-webkit-scrollbar {\n        width: 6px;\n      }\n\n      &::-webkit-scrollbar-thumb {\n        background: rgba(255, 255, 255, 0.2);\n        border-radius: 3px;\n\n        &:hover {\n          background: rgba(255, 255, 255, 0.3);\n        }\n      }\n\n      &::-webkit-scrollbar-track {\n        background: transparent;\n      }\n    }\n\n    .timeline-container {\n      position: relative;\n      background: rgba(0, 21, 41, 0.95);\n      border-top: 1px solid rgba(255, 255, 255, 0.1);\n      transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);\n      height: 300px;\n\n      &.timeline-collapsed {\n        height: 24px;\n      }\n\n      .timeline-toggle {\n        position: absolute;\n        top: -24px;\n        left: 50%;\n        transform: translateX(-50%);\n        width: 48px;\n        height: 24px;\n        background: rgba(0, 21, 41, 0.95);\n        border-radius: 4px 4px 0 0;\n        border: 1px solid rgba(255, 255, 255, 0.1);\n        border-bottom: none;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        cursor: pointer;\n        color: rgba(255, 255, 255, 0.65);\n        transition: all 0.3s;\n\n        &:hover {\n          color: #40a9ff;\n        }\n\n        .el-icon {\n          font-size: 16px;\n          transition: transform 0.3s;\n\n          &.is-rotate {\n            transform: rotate(180deg);\n          }\n        }\n      }\n    }\n  }\n}\n\n@keyframes rotate {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n</style> "],"mappings":"AAwGA,SAASA,GAAG,EAAEC,QAAO,QAAS,KAAI;AAClC,SAASC,SAAS,EAAEC,QAAO,QAAS,YAAW;AAC/C,SAASC,QAAO,QAAS,MAAK;AAC9B,SACEC,OAAO,EACPC,WAAW,EACXC,QAAQ,EACRC,KAAK,EACLC,WAAW,EACXC,IAAI,EACJC,OAAO,EACPC,YAAY,EACZC,WAAW,EACXC,OAAO,EACPC,IAAI,EACJC,SAAQ,QACH,yBAAwB;AAC/B,OAAOC,aAAY,MAAO,sBAAqB;AAE/C,eAAe;EACbC,IAAI,EAAE,YAAY;EAClBC,UAAU,EAAE;IACVd,OAAO;IACPC,WAAW;IACXC,QAAQ;IACRC,KAAK;IACLC,WAAW;IACXC,IAAI;IACJC,OAAO;IACPC,YAAY;IACZC,WAAW;IACXC,OAAO;IACPC,IAAI;IACJC,SAAS;IACTC;EACF,CAAC;EACDG,KAAKA,CAAA,EAAG;IACN,MAAMC,MAAK,GAAInB,SAAS,CAAC;IACzB,MAAMoB,KAAI,GAAInB,QAAQ,CAAC;IACvB,MAAMoB,KAAI,GAAInB,QAAQ,CAAC;IAEvB,MAAMoB,UAAS,GAAIxB,GAAG,CAAC,+CAA+C;IACtE,MAAMyB,QAAO,GAAIzB,GAAG,CAAC,OAAO;IAC5B,MAAM0B,mBAAkB,GAAI1B,GAAG,CAAC,KAAK;IAErC,MAAM2B,UAAS,GAAI1B,QAAQ,CAAC,MAAMqB,KAAK,CAACM,IAAI;IAC5C,MAAMC,YAAW,GAAI5B,QAAQ,CAAC,MAAM;MAClC,MAAM6B,QAAO,GAAI;QACf,WAAW,EAAE,MAAM;QACnB,aAAa,EAAE,MAAM;QACrB,WAAW,EAAE,MAAM;QACnB,aAAa,EAAE,MAAM;QACrB,aAAa,EAAE;MACjB;MACA,OAAOA,QAAQ,CAACR,KAAK,CAACM,IAAI,KAAK,MAAK;IACtC,CAAC;IAED,MAAMG,gBAAe,GAAKC,KAAK,IAAK;MAClCX,MAAM,CAACY,IAAI,CAACD,KAAK;IACnB;IAEA,MAAME,WAAU,GAAIA,CAAA,KAAM;MACxBb,MAAM,CAACY,IAAI,CAAC,UAAU;IACxB;IAEA,MAAME,YAAW,GAAIA,CAAA,KAAM;MACzBd,MAAM,CAACY,IAAI,CAAC,WAAW;IACzB;IAEA,MAAMG,YAAW,GAAI,MAAAA,CAAA,KAAY;MAC/B,IAAI;QACF,MAAMb,KAAK,CAACc,QAAQ,CAAC,aAAa;QAClChB,MAAM,CAACY,IAAI,CAAC,QAAQ;MACtB,EAAE,OAAOK,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,gBAAgB,EAAEA,KAAK;MACvC;IACF;IAEA,MAAME,cAAa,GAAIA,CAAA,KAAM;MAC3Bd,mBAAmB,CAACe,KAAI,GAAI,CAACf,mBAAmB,CAACe,KAAI;IACvD;IAEA,OAAO;MACLjB,UAAU;MACVC,QAAQ;MACRE,UAAU;MACVE,YAAY;MACZE,gBAAgB;MAChBG,WAAW;MACXC,YAAY;MACZC,YAAY;MACZV,mBAAmB;MACnBc;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}