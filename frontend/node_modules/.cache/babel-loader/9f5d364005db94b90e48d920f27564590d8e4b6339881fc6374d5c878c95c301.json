{"ast":null,"code":"import { ref, reactive, computed } from 'vue';\nimport BaseEChart from '@/components/BaseEChart.vue';\nimport { Search, Refresh, Download, View, Check } from '@element-plus/icons-vue';\n\n// 筛选表单\n\nexport default {\n  __name: 'WarningAnalysis',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const filterForm = reactive({\n      dateRange: [],\n      warningType: '',\n      warningLevel: ''\n    });\n\n    // 预警统计数据\n    const warningStats = reactive({\n      total: 128,\n      trend: 15,\n      unhandled: 20,\n      handled: 108\n    });\n\n    // 预警类型和等级选项\n    const warningTypes = [{\n      label: '全部',\n      value: ''\n    }, {\n      label: '温度异常',\n      value: 'temperature'\n    }, {\n      label: '压力异常',\n      value: 'pressure'\n    }, {\n      label: '流量异常',\n      value: 'flow'\n    }, {\n      label: '质量异常',\n      value: 'quality'\n    }];\n    const warningLevels = [{\n      label: '全部',\n      value: ''\n    }, {\n      label: '一般',\n      value: 'low'\n    }, {\n      label: '重要',\n      value: 'medium'\n    }, {\n      label: '严重',\n      value: 'high'\n    }, {\n      label: '紧急',\n      value: 'critical'\n    }];\n\n    // 图表相关\n    const chartTimeRange = ref('day');\n    const chartType = ref('stack');\n    const chartOptions = computed(() => ({\n      tooltip: {\n        trigger: 'axis',\n        axisPointer: {\n          type: 'shadow'\n        }\n      },\n      legend: {\n        data: ['一般', '重要', '严重', '紧急']\n      },\n      grid: {\n        left: '3%',\n        right: '4%',\n        bottom: '3%',\n        containLabel: true\n      },\n      xAxis: {\n        type: 'category',\n        data: ['00:00', '03:00', '06:00', '09:00', '12:00', '15:00', '18:00', '21:00']\n      },\n      yAxis: {\n        type: 'value'\n      },\n      series: [{\n        name: '一般',\n        type: 'bar',\n        stack: 'total',\n        emphasis: {\n          focus: 'series'\n        },\n        data: [5, 7, 4, 6, 8, 5, 6, 4]\n      }, {\n        name: '重要',\n        type: 'bar',\n        stack: 'total',\n        emphasis: {\n          focus: 'series'\n        },\n        data: [4, 5, 3, 4, 6, 4, 5, 7]\n      }, {\n        name: '严重',\n        type: 'bar',\n        stack: 'total',\n        emphasis: {\n          focus: 'series'\n        },\n        data: [3, 2, 4, 3, 2, 4, 3, 4]\n      }, {\n        name: '紧急',\n        type: 'bar',\n        stack: 'total',\n        emphasis: {\n          focus: 'series'\n        },\n        data: [2, 1, 2, 3, 2, 1, 2, 3]\n      }]\n    }));\n\n    // 预警列表数据\n    const warningList = ref([{\n      time: '2024-03-20 10:30:00',\n      type: '温度异常',\n      level: '严重',\n      description: '3号监测点温度超过阈值30%，当前温度85℃，已持续30分钟',\n      status: '未处理',\n      relatedData: [{\n        parameter: '温度',\n        value: '85℃',\n        threshold: '65℃',\n        deviation: '+30%'\n      }, {\n        parameter: '压力',\n        value: '2.5MPa',\n        threshold: '2.0MPa',\n        deviation: '+25%'\n      }]\n    }, {\n      time: '2024-03-20 09:15:00',\n      type: '压力异常',\n      level: '重要',\n      description: '主管道压力波动异常，当前压力2.8MPa，波动范围±0.5MPa',\n      status: '已处理',\n      relatedData: [{\n        parameter: '压力',\n        value: '2.8MPa',\n        threshold: '2.5MPa',\n        deviation: '+12%'\n      }, {\n        parameter: '流量',\n        value: '150L/s',\n        threshold: '180L/s',\n        deviation: '-17%'\n      }],\n      processInfo: {\n        time: '2024-03-20 09:45:00',\n        operator: '张工',\n        solution: '调整减压阀开度，稳定主管道压力',\n        result: '压力恢复正常，系统运行稳定'\n      }\n    }]);\n\n    // 分页相关\n    const currentPage = ref(1);\n    const pageSize = ref(10);\n    const total = ref(128);\n\n    // 对话框相关\n    const detailDialogVisible = ref(false);\n    const processDialogVisible = ref(false);\n    const currentWarning = ref(null);\n    const processForm = reactive({\n      solution: '',\n      result: ''\n    });\n\n    // 方法\n    const handleSearch = () => {\n      console.log('Search with:', filterForm);\n    };\n    const handleReset = () => {\n      Object.assign(filterForm, {\n        dateRange: [],\n        warningType: '',\n        warningLevel: ''\n      });\n    };\n    const handleSizeChange = val => {\n      pageSize.value = val;\n      // 重新加载数据\n    };\n    const handleCurrentChange = val => {\n      currentPage.value = val;\n      // 重新加载数据\n    };\n    const handleDetail = row => {\n      currentWarning.value = row;\n      detailDialogVisible.value = true;\n    };\n    const handleProcess = row => {\n      currentWarning.value = row;\n      processDialogVisible.value = true;\n    };\n    const submitProcess = () => {\n      console.log('Process submitted:', processForm);\n      processDialogVisible.value = false;\n      // 更新预警状态\n    };\n    const getWarningLevelType = level => {\n      const typeMap = {\n        '一般': 'info',\n        '重要': 'warning',\n        '严重': 'danger',\n        '紧急': 'error'\n      };\n      return typeMap[level] || 'info';\n    };\n    const getWarningTypeTag = type => {\n      const typeMap = {\n        '温度异常': 'danger',\n        '压力异常': 'warning',\n        '流量异常': 'info',\n        '质量异常': 'success'\n      };\n      return typeMap[type] || 'info';\n    };\n    const getRowClassName = ({\n      row\n    }) => {\n      if (row.status === '已处理') {\n        return 'processed-row';\n      }\n      return '';\n    };\n    const dateShortcuts = [{\n      text: '最近一周',\n      value: () => {\n        const end = new Date();\n        const start = new Date();\n        start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\n        return [start, end];\n      }\n    }, {\n      text: '最近一个月',\n      value: () => {\n        const end = new Date();\n        const start = new Date();\n        start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);\n        return [start, end];\n      }\n    }, {\n      text: '最近三个月',\n      value: () => {\n        const end = new Date();\n        const start = new Date();\n        start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);\n        return [start, end];\n      }\n    }];\n    const exportData = () => {\n      console.log('Exporting data...');\n      // 实现导出逻辑\n    };\n    const refreshList = () => {\n      console.log('Refreshing list...');\n      // 实现刷新逻辑\n    };\n    const loading = ref(false); // 新增 loading 状态\n\n    const __returned__ = {\n      filterForm,\n      warningStats,\n      warningTypes,\n      warningLevels,\n      chartTimeRange,\n      chartType,\n      chartOptions,\n      warningList,\n      currentPage,\n      pageSize,\n      total,\n      detailDialogVisible,\n      processDialogVisible,\n      currentWarning,\n      processForm,\n      handleSearch,\n      handleReset,\n      handleSizeChange,\n      handleCurrentChange,\n      handleDetail,\n      handleProcess,\n      submitProcess,\n      getWarningLevelType,\n      getWarningTypeTag,\n      getRowClassName,\n      dateShortcuts,\n      exportData,\n      refreshList,\n      loading,\n      ref,\n      reactive,\n      computed,\n      BaseEChart,\n      get Search() {\n        return Search;\n      },\n      get Refresh() {\n        return Refresh;\n      },\n      get Download() {\n        return Download;\n      },\n      get View() {\n        return View;\n      },\n      get Check() {\n        return Check;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","reactive","computed","BaseEChart","Search","Refresh","Download","View","Check","filterForm","dateRange","warningType","warningLevel","warningStats","total","trend","unhandled","handled","warningTypes","label","value","warningLevels","chartTimeRange","chartType","chartOptions","tooltip","trigger","axisPointer","type","legend","data","grid","left","right","bottom","containLabel","xAxis","yAxis","series","name","stack","emphasis","focus","warningList","time","level","description","status","relatedData","parameter","threshold","deviation","processInfo","operator","solution","result","currentPage","pageSize","detailDialogVisible","processDialogVisible","currentWarning","processForm","handleSearch","console","log","handleReset","Object","assign","handleSizeChange","val","handleCurrentChange","handleDetail","row","handleProcess","submitProcess","getWarningLevelType","typeMap","getWarningTypeTag","getRowClassName","dateShortcuts","text","end","Date","start","setTime","getTime","exportData","refreshList","loading"],"sources":["D:/restore/water-melt/frontend/src/views/WarningAnalysis.vue"],"sourcesContent":["<template>\r\n  <div class=\"warning-analysis\">\r\n    <div class=\"warning-header\">\r\n      <div class=\"header-content\">\r\n        <h2>预警分析</h2>\r\n        <div class=\"header-stats\">\r\n          <div class=\"stat-item\">\r\n            <span class=\"stat-label\">总预警数</span>\r\n            <span class=\"stat-value\">{{ warningStats.total }}</span>\r\n            <span class=\"stat-trend\" :class=\"{ 'up': warningStats.trend > 0, 'down': warningStats.trend < 0 }\">\r\n              {{ warningStats.trend > 0 ? '+' : '' }}{{ warningStats.trend }}%\r\n            </span>\r\n          </div>\r\n          <div class=\"stat-item\">\r\n            <span class=\"stat-label\">未处理</span>\r\n            <span class=\"stat-value warning\">{{ warningStats.unhandled }}</span>\r\n          </div>\r\n          <div class=\"stat-item\">\r\n            <span class=\"stat-label\">已处理</span>\r\n            <span class=\"stat-value success\">{{ warningStats.handled }}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"warning-filters\">\r\n        <el-form :inline=\"true\" :model=\"filterForm\" class=\"filter-form\">\r\n          <el-form-item label=\"时间范围\">\r\n            <el-date-picker\r\n              v-model=\"filterForm.dateRange\"\r\n              type=\"daterange\"\r\n              range-separator=\"至\"\r\n              start-placeholder=\"开始日期\"\r\n              end-placeholder=\"结束日期\"\r\n              :shortcuts=\"dateShortcuts\"\r\n            />\r\n          </el-form-item>\r\n          <el-form-item label=\"预警类型\">\r\n            <el-select v-model=\"filterForm.warningType\" placeholder=\"选择预警类型\" clearable>\r\n              <el-option\r\n                v-for=\"type in warningTypes\"\r\n                :key=\"type.value\"\r\n                :label=\"type.label\"\r\n                :value=\"type.value\"\r\n              />\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"预警等级\">\r\n            <el-select v-model=\"filterForm.warningLevel\" placeholder=\"选择预警等级\" clearable>\r\n              <el-option\r\n                v-for=\"level in warningLevels\"\r\n                :key=\"level.value\"\r\n                :label=\"level.label\"\r\n                :value=\"level.value\"\r\n              />\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" @click=\"handleSearch\">\r\n              <el-icon><Search /></el-icon>查询\r\n            </el-button>\r\n            <el-button @click=\"handleReset\">\r\n              <el-icon><Refresh /></el-icon>重置\r\n            </el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"warning-content\">\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"6\" v-for=\"(stat, index) in warningLevelStats\" :key=\"index\">\r\n          <el-card class=\"warning-stat-card\" :class=\"stat.type\">\r\n            <div class=\"stat-card-content\">\r\n              <div class=\"stat-card-header\">\r\n                <span class=\"stat-card-title\">{{ stat.label }}</span>\r\n                <el-tag :type=\"stat.type\" effect=\"dark\">{{ stat.count }}</el-tag>\r\n              </div>\r\n              <div class=\"stat-card-body\">\r\n                <el-progress\r\n                  :percentage=\"stat.percentage\"\r\n                  :color=\"stat.color\"\r\n                  :show-text=\"false\"\r\n                  :stroke-width=\"8\"\r\n                />\r\n                <div class=\"stat-card-info\">\r\n                  <span class=\"percentage\">占比 {{ stat.percentage }}%</span>\r\n                  <span class=\"trend\" :class=\"{ 'up': stat.trend > 0, 'down': stat.trend < 0 }\">\r\n                    {{ stat.trend > 0 ? '+' : '' }}{{ stat.trend }}%\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </el-card>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <div class=\"warning-chart\">\r\n        <el-card>\r\n          <template #header>\r\n            <div class=\"card-header\">\r\n              <span>预警趋势分析</span>\r\n              <div class=\"chart-controls\">\r\n                <el-radio-group v-model=\"chartTimeRange\" size=\"small\">\r\n                  <el-radio-button label=\"day\">24小时</el-radio-button>\r\n                  <el-radio-button label=\"week\">7天</el-radio-button>\r\n                  <el-radio-button label=\"month\">30天</el-radio-button>\r\n                </el-radio-group>\r\n                <el-select v-model=\"chartType\" size=\"small\" style=\"margin-left: 16px;\">\r\n                  <el-option label=\"堆叠图\" value=\"stack\" />\r\n                  <el-option label=\"折线图\" value=\"line\" />\r\n                </el-select>\r\n              </div>\r\n            </div>\r\n          </template>\r\n          <div class=\"chart-container\">\r\n            <base-echart :options=\"chartOptions\" height=\"300px\" />\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n\r\n      <div class=\"warning-list\">\r\n        <el-card>\r\n          <template #header>\r\n            <div class=\"card-header\">\r\n              <div class=\"header-left\">\r\n                <span>预警记录</span>\r\n                <el-tag type=\"danger\" effect=\"dark\" size=\"small\" style=\"margin-left: 12px;\">\r\n                  {{ warningStats.unhandled }} 个未处理\r\n                </el-tag>\r\n              </div>\r\n              <div class=\"header-right\">\r\n                <el-button type=\"primary\" link @click=\"exportData\">\r\n                  <el-icon><Download /></el-icon>导出数据\r\n                </el-button>\r\n                <el-button type=\"primary\" link @click=\"refreshList\">\r\n                  <el-icon><Refresh /></el-icon>刷新\r\n                </el-button>\r\n              </div>\r\n            </div>\r\n          </template>\r\n          <el-table \r\n            :data=\"warningList\" \r\n            style=\"width: 100%\"\r\n            v-loading=\"loading\"\r\n            :row-class-name=\"getRowClassName\"\r\n          >\r\n            <el-table-column prop=\"time\" label=\"时间\" width=\"180\" sortable />\r\n            <el-table-column prop=\"type\" label=\"预警类型\" width=\"120\">\r\n              <template #default=\"{ row }\">\r\n                <el-tag :type=\"getWarningTypeTag(row.type)\" size=\"small\">\r\n                  {{ row.type }}\r\n                </el-tag>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"level\" label=\"预警等级\" width=\"100\">\r\n              <template #default=\"{ row }\">\r\n                <el-tag :type=\"getWarningLevelType(row.level)\" size=\"small\" effect=\"dark\">\r\n                  {{ row.level }}\r\n                </el-tag>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"description\" label=\"预警描述\" show-overflow-tooltip />\r\n            <el-table-column prop=\"status\" label=\"状态\" width=\"100\">\r\n              <template #default=\"{ row }\">\r\n                <el-tag \r\n                  :type=\"row.status === '已处理' ? 'success' : 'warning'\"\r\n                  size=\"small\"\r\n                  effect=\"plain\"\r\n                >\r\n                  {{ row.status }}\r\n                </el-tag>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\" width=\"180\" fixed=\"right\">\r\n              <template #default=\"{ row }\">\r\n                <el-button link type=\"primary\" size=\"small\" @click=\"handleDetail(row)\">\r\n                  <el-icon><View /></el-icon>详情\r\n                </el-button>\r\n                <el-button \r\n                  v-if=\"row.status !== '已处理'\"\r\n                  link \r\n                  type=\"success\" \r\n                  size=\"small\"\r\n                  @click=\"handleProcess(row)\"\r\n                >\r\n                  <el-icon><Check /></el-icon>处理\r\n                </el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n          <div class=\"pagination-container\">\r\n            <el-pagination\r\n              v-model:current-page=\"currentPage\"\r\n              v-model:page-size=\"pageSize\"\r\n              :page-sizes=\"[10, 20, 50, 100]\"\r\n              :total=\"total\"\r\n              layout=\"total, sizes, prev, pager, next, jumper\"\r\n              @size-change=\"handleSizeChange\"\r\n              @current-change=\"handleCurrentChange\"\r\n            />\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 预警详情对话框 -->\r\n    <el-dialog\r\n      v-model=\"detailDialogVisible\"\r\n      title=\"预警详情\"\r\n      width=\"60%\"\r\n    >\r\n      <div v-if=\"currentWarning\" class=\"warning-detail\">\r\n        <el-descriptions :column=\"2\" border>\r\n          <el-descriptions-item label=\"预警时间\">{{ currentWarning.time }}</el-descriptions-item>\r\n          <el-descriptions-item label=\"预警类型\">{{ currentWarning.type }}</el-descriptions-item>\r\n          <el-descriptions-item label=\"预警等级\">\r\n            <el-tag :type=\"getWarningLevelType(currentWarning.level)\">\r\n              {{ currentWarning.level }}\r\n            </el-tag>\r\n          </el-descriptions-item>\r\n          <el-descriptions-item label=\"当前状态\">\r\n            <el-tag :type=\"currentWarning.status === '已处理' ? 'success' : 'warning'\">\r\n              {{ currentWarning.status }}\r\n            </el-tag>\r\n          </el-descriptions-item>\r\n          <el-descriptions-item label=\"预警描述\" :span=\"2\">\r\n            {{ currentWarning.description }}\r\n          </el-descriptions-item>\r\n          <el-descriptions-item label=\"相关数据\" :span=\"2\">\r\n            <el-table :data=\"currentWarning.relatedData\" border size=\"small\">\r\n              <el-table-column prop=\"parameter\" label=\"参数\" />\r\n              <el-table-column prop=\"value\" label=\"数值\" />\r\n              <el-table-column prop=\"threshold\" label=\"阈值\" />\r\n              <el-table-column prop=\"deviation\" label=\"偏差\" />\r\n            </el-table>\r\n          </el-descriptions-item>\r\n          <el-descriptions-item v-if=\"currentWarning.processInfo\" label=\"处理信息\" :span=\"2\">\r\n            <div class=\"process-info\">\r\n              <p>处理时间：{{ currentWarning.processInfo.time }}</p>\r\n              <p>处理人员：{{ currentWarning.processInfo.operator }}</p>\r\n              <p>处理方案：{{ currentWarning.processInfo.solution }}</p>\r\n              <p>处理结果：{{ currentWarning.processInfo.result }}</p>\r\n            </div>\r\n          </el-descriptions-item>\r\n        </el-descriptions>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- 处理预警对话框 -->\r\n    <el-dialog\r\n      v-model=\"processDialogVisible\"\r\n      title=\"处理预警\"\r\n      width=\"50%\"\r\n    >\r\n      <el-form :model=\"processForm\" label-width=\"100px\">\r\n        <el-form-item label=\"处理方案\">\r\n          <el-input\r\n            v-model=\"processForm.solution\"\r\n            type=\"textarea\"\r\n            rows=\"3\"\r\n            placeholder=\"请输入处理方案\"\r\n          />\r\n        </el-form-item>\r\n        <el-form-item label=\"处理结果\">\r\n          <el-input\r\n            v-model=\"processForm.result\"\r\n            type=\"textarea\"\r\n            rows=\"3\"\r\n            placeholder=\"请输入处理结果\"\r\n          />\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"processDialogVisible = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"submitProcess\">确认</el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, reactive, computed } from 'vue'\r\nimport BaseEChart from '@/components/BaseEChart.vue'\r\nimport { Search, Refresh, Download, View, Check } from '@element-plus/icons-vue'\r\n\r\n// 筛选表单\r\nconst filterForm = reactive({\r\n  dateRange: [],\r\n  warningType: '',\r\n  warningLevel: ''\r\n})\r\n\r\n// 预警统计数据\r\nconst warningStats = reactive({\r\n  total: 128,\r\n  trend: 15,\r\n  unhandled: 20,\r\n  handled: 108\r\n})\r\n\r\n// 预警类型和等级选项\r\nconst warningTypes = [\r\n  { label: '全部', value: '' },\r\n  { label: '温度异常', value: 'temperature' },\r\n  { label: '压力异常', value: 'pressure' },\r\n  { label: '流量异常', value: 'flow' },\r\n  { label: '质量异常', value: 'quality' }\r\n]\r\n\r\nconst warningLevels = [\r\n  { label: '全部', value: '' },\r\n  { label: '一般', value: 'low' },\r\n  { label: '重要', value: 'medium' },\r\n  { label: '严重', value: 'high' },\r\n  { label: '紧急', value: 'critical' }\r\n]\r\n\r\n// 图表相关\r\nconst chartTimeRange = ref('day')\r\nconst chartType = ref('stack')\r\nconst chartOptions = computed(() => ({\r\n  tooltip: {\r\n    trigger: 'axis',\r\n    axisPointer: {\r\n      type: 'shadow'\r\n    }\r\n  },\r\n  legend: {\r\n    data: ['一般', '重要', '严重', '紧急']\r\n  },\r\n  grid: {\r\n    left: '3%',\r\n    right: '4%',\r\n    bottom: '3%',\r\n    containLabel: true\r\n  },\r\n  xAxis: {\r\n    type: 'category',\r\n    data: ['00:00', '03:00', '06:00', '09:00', '12:00', '15:00', '18:00', '21:00']\r\n  },\r\n  yAxis: {\r\n    type: 'value'\r\n  },\r\n  series: [\r\n    {\r\n      name: '一般',\r\n      type: 'bar',\r\n      stack: 'total',\r\n      emphasis: {\r\n        focus: 'series'\r\n      },\r\n      data: [5, 7, 4, 6, 8, 5, 6, 4]\r\n    },\r\n    {\r\n      name: '重要',\r\n      type: 'bar',\r\n      stack: 'total',\r\n      emphasis: {\r\n        focus: 'series'\r\n      },\r\n      data: [4, 5, 3, 4, 6, 4, 5, 7]\r\n    },\r\n    {\r\n      name: '严重',\r\n      type: 'bar',\r\n      stack: 'total',\r\n      emphasis: {\r\n        focus: 'series'\r\n      },\r\n      data: [3, 2, 4, 3, 2, 4, 3, 4]\r\n    },\r\n    {\r\n      name: '紧急',\r\n      type: 'bar',\r\n      stack: 'total',\r\n      emphasis: {\r\n        focus: 'series'\r\n      },\r\n      data: [2, 1, 2, 3, 2, 1, 2, 3]\r\n    }\r\n  ]\r\n}))\r\n\r\n// 预警列表数据\r\nconst warningList = ref([\r\n  {\r\n    time: '2024-03-20 10:30:00',\r\n    type: '温度异常',\r\n    level: '严重',\r\n    description: '3号监测点温度超过阈值30%，当前温度85℃，已持续30分钟',\r\n    status: '未处理',\r\n    relatedData: [\r\n      { parameter: '温度', value: '85℃', threshold: '65℃', deviation: '+30%' },\r\n      { parameter: '压力', value: '2.5MPa', threshold: '2.0MPa', deviation: '+25%' }\r\n    ]\r\n  },\r\n  {\r\n    time: '2024-03-20 09:15:00',\r\n    type: '压力异常',\r\n    level: '重要',\r\n    description: '主管道压力波动异常，当前压力2.8MPa，波动范围±0.5MPa',\r\n    status: '已处理',\r\n    relatedData: [\r\n      { parameter: '压力', value: '2.8MPa', threshold: '2.5MPa', deviation: '+12%' },\r\n      { parameter: '流量', value: '150L/s', threshold: '180L/s', deviation: '-17%' }\r\n    ],\r\n    processInfo: {\r\n      time: '2024-03-20 09:45:00',\r\n      operator: '张工',\r\n      solution: '调整减压阀开度，稳定主管道压力',\r\n      result: '压力恢复正常，系统运行稳定'\r\n    }\r\n  }\r\n])\r\n\r\n// 分页相关\r\nconst currentPage = ref(1)\r\nconst pageSize = ref(10)\r\nconst total = ref(128)\r\n\r\n// 对话框相关\r\nconst detailDialogVisible = ref(false)\r\nconst processDialogVisible = ref(false)\r\nconst currentWarning = ref(null)\r\nconst processForm = reactive({\r\n  solution: '',\r\n  result: ''\r\n})\r\n\r\n// 方法\r\nconst handleSearch = () => {\r\n  console.log('Search with:', filterForm)\r\n}\r\n\r\nconst handleReset = () => {\r\n  Object.assign(filterForm, {\r\n    dateRange: [],\r\n    warningType: '',\r\n    warningLevel: ''\r\n  })\r\n}\r\n\r\nconst handleSizeChange = (val) => {\r\n  pageSize.value = val\r\n  // 重新加载数据\r\n}\r\n\r\nconst handleCurrentChange = (val) => {\r\n  currentPage.value = val\r\n  // 重新加载数据\r\n}\r\n\r\nconst handleDetail = (row) => {\r\n  currentWarning.value = row\r\n  detailDialogVisible.value = true\r\n}\r\n\r\nconst handleProcess = (row) => {\r\n  currentWarning.value = row\r\n  processDialogVisible.value = true\r\n}\r\n\r\nconst submitProcess = () => {\r\n  console.log('Process submitted:', processForm)\r\n  processDialogVisible.value = false\r\n  // 更新预警状态\r\n}\r\n\r\nconst getWarningLevelType = (level) => {\r\n  const typeMap = {\r\n    '一般': 'info',\r\n    '重要': 'warning',\r\n    '严重': 'danger',\r\n    '紧急': 'error'\r\n  }\r\n  return typeMap[level] || 'info'\r\n}\r\n\r\nconst getWarningTypeTag = (type) => {\r\n  const typeMap = {\r\n    '温度异常': 'danger',\r\n    '压力异常': 'warning',\r\n    '流量异常': 'info',\r\n    '质量异常': 'success'\r\n  }\r\n  return typeMap[type] || 'info'\r\n}\r\n\r\nconst getRowClassName = ({ row }) => {\r\n  if (row.status === '已处理') {\r\n    return 'processed-row'\r\n  }\r\n  return ''\r\n}\r\n\r\nconst dateShortcuts = [\r\n  {\r\n    text: '最近一周',\r\n    value: () => {\r\n      const end = new Date()\r\n      const start = new Date()\r\n      start.setTime(start.getTime() - 3600 * 1000 * 24 * 7)\r\n      return [start, end]\r\n    }\r\n  },\r\n  {\r\n    text: '最近一个月',\r\n    value: () => {\r\n      const end = new Date()\r\n      const start = new Date()\r\n      start.setTime(start.getTime() - 3600 * 1000 * 24 * 30)\r\n      return [start, end]\r\n    }\r\n  },\r\n  {\r\n    text: '最近三个月',\r\n    value: () => {\r\n      const end = new Date()\r\n      const start = new Date()\r\n      start.setTime(start.getTime() - 3600 * 1000 * 24 * 90)\r\n      return [start, end]\r\n    }\r\n  }\r\n]\r\n\r\nconst exportData = () => {\r\n  console.log('Exporting data...')\r\n  // 实现导出逻辑\r\n}\r\n\r\nconst refreshList = () => {\r\n  console.log('Refreshing list...')\r\n  // 实现刷新逻辑\r\n}\r\n\r\nconst loading = ref(false) // 新增 loading 状态\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.warning-analysis {\r\n  padding: 20px;\r\n\r\n  .warning-header {\r\n    margin-bottom: 20px;\r\n\r\n    h2 {\r\n      margin: 0 0 20px;\r\n      color: #fff;\r\n    }\r\n  }\r\n\r\n  .warning-content {\r\n    .warning-stat-card {\r\n      margin-bottom: 20px;\r\n      background: rgba(0, 21, 41, 0.8);\r\n      border: none;\r\n\r\n      :deep(.el-card__header) {\r\n        border-bottom: 1px solid rgba(255, 255, 255, 0.1);\r\n        padding: 12px 20px;\r\n\r\n        .card-header {\r\n          display: flex;\r\n          justify-content: space-between;\r\n          align-items: center;\r\n          color: #fff;\r\n        }\r\n      }\r\n\r\n      .warning-stat {\r\n        text-align: center;\r\n        padding: 20px 0;\r\n\r\n        .stat-number {\r\n          font-size: 36px;\r\n          font-weight: bold;\r\n          color: #fff;\r\n          display: block;\r\n        }\r\n\r\n        .stat-trend {\r\n          font-size: 14px;\r\n          margin-top: 8px;\r\n          display: inline-block;\r\n\r\n          &.up {\r\n            color: #f56c6c;\r\n          }\r\n\r\n          &.down {\r\n            color: #67c23a;\r\n          }\r\n        }\r\n      }\r\n\r\n      .level-stat {\r\n        padding: 10px 0;\r\n\r\n        .percentage-text {\r\n          display: block;\r\n          text-align: center;\r\n          margin-top: 8px;\r\n          color: rgba(255, 255, 255, 0.85);\r\n        }\r\n      }\r\n    }\r\n\r\n    .warning-chart {\r\n      margin-bottom: 20px;\r\n\r\n      :deep(.el-card) {\r\n        background: rgba(0, 21, 41, 0.8);\r\n        border: none;\r\n\r\n        .el-card__header {\r\n          border-bottom: 1px solid rgba(255, 255, 255, 0.1);\r\n          \r\n          .card-header {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            color: #fff;\r\n          }\r\n        }\r\n      }\r\n\r\n      .chart-container {\r\n        padding: 20px 0;\r\n      }\r\n    }\r\n\r\n    .warning-list {\r\n      :deep(.el-card) {\r\n        background: rgba(0, 21, 41, 0.8);\r\n        border: none;\r\n\r\n        .el-card__header {\r\n          border-bottom: 1px solid rgba(255, 255, 255, 0.1);\r\n          \r\n          .card-header {\r\n            display: flex;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            color: #fff;\r\n          }\r\n        }\r\n      }\r\n\r\n      .pagination-container {\r\n        margin-top: 20px;\r\n        display: flex;\r\n        justify-content: flex-end;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// 暗色主题适配\r\n:deep(.el-table) {\r\n  background-color: transparent;\r\n  \r\n  th.el-table__cell {\r\n    background-color: rgba(0, 21, 41, 0.9);\r\n    border-bottom: 1px solid rgba(255, 255, 255, 0.1);\r\n    color: rgba(255, 255, 255, 0.85);\r\n  }\r\n  \r\n  td.el-table__cell {\r\n    background-color: transparent;\r\n    border-bottom: 1px solid rgba(255, 255, 255, 0.1);\r\n    color: rgba(255, 255, 255, 0.85);\r\n  }\r\n}\r\n\r\n:deep(.el-dialog) {\r\n  background: rgba(0, 21, 41, 0.95);\r\n  \r\n  .el-dialog__title {\r\n    color: #fff;\r\n  }\r\n  \r\n  .el-dialog__body {\r\n    color: rgba(255, 255, 255, 0.85);\r\n  }\r\n}\r\n\r\n:deep(.el-descriptions) {\r\n  .el-descriptions__title {\r\n    color: #fff;\r\n  }\r\n  \r\n  .el-descriptions__label {\r\n    color: rgba(255, 255, 255, 0.85);\r\n  }\r\n  \r\n  .el-descriptions__content {\r\n    color: rgba(255, 255, 255, 0.85);\r\n  }\r\n}\r\n\r\n.process-info {\r\n  p {\r\n    margin: 5px 0;\r\n    color: rgba(255, 255, 255, 0.85);\r\n  }\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}