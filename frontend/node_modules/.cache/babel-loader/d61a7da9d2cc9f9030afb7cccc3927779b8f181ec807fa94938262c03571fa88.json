{"ast":null,"code":"import { ref, computed } from 'vue';\nimport { useRouter, useRoute } from 'vue-router';\nimport { useStore } from 'vuex';\nimport { Monitor, VideoCamera, DataLine, Files, TrendCharts, User, Setting, SwitchButton, CaretBottom, Expand, Fold } from '@element-plus/icons-vue';\nexport default {\n  name: 'MainLayout',\n  components: {\n    Monitor,\n    VideoCamera,\n    DataLine,\n    Files,\n    TrendCharts,\n    User,\n    Setting,\n    SwitchButton,\n    CaretBottom,\n    Expand,\n    Fold\n  },\n  setup() {\n    const router = useRouter();\n    const route = useRoute();\n    const store = useStore();\n    const isCollapsed = ref(false);\n    const userAvatar = ref('https://avatars.githubusercontent.com/u/1?v=4');\n    const username = ref('Admin');\n    const activeMenu = computed(() => route.path);\n    const currentRoute = computed(() => {\n      const routeMap = {\n        '/overview': '系统概览',\n        '/monitoring': '智能检测',\n        '/analysis': '数据分析',\n        '/management': '数据管理',\n        '/evaluation': '质量评估'\n      };\n      return routeMap[route.path] || '未知页面';\n    });\n    const toggleSidebar = () => {\n      isCollapsed.value = !isCollapsed.value;\n    };\n    const handleMenuSelect = index => {\n      router.push(index);\n    };\n    const goToProfile = () => {\n      router.push('/profile');\n    };\n    const goToSettings = () => {\n      router.push('/settings');\n    };\n    const handleLogout = async () => {\n      try {\n        await store.dispatch('auth/logout');\n        router.push('/login');\n      } catch (error) {\n        console.error('Logout failed:', error);\n      }\n    };\n    return {\n      isCollapsed,\n      userAvatar,\n      username,\n      activeMenu,\n      currentRoute,\n      toggleSidebar,\n      handleMenuSelect,\n      goToProfile,\n      goToSettings,\n      handleLogout\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","useRouter","useRoute","useStore","Monitor","VideoCamera","DataLine","Files","TrendCharts","User","Setting","SwitchButton","CaretBottom","Expand","Fold","name","components","setup","router","route","store","isCollapsed","userAvatar","username","activeMenu","path","currentRoute","routeMap","toggleSidebar","value","handleMenuSelect","index","push","goToProfile","goToSettings","handleLogout","dispatch","error","console"],"sources":["D:\\restore\\water-melt\\frontend\\src\\layouts\\MainLayout.vue"],"sourcesContent":["<!-- 主布局组件 -->\n<template>\n  <div class=\"main-layout\">\n    <!-- 侧边栏 -->\n    <div class=\"sidebar\" :class=\"{ collapsed: isCollapsed }\">\n      <div class=\"logo\">\n        <img src=\"@/assets/logo.png\" alt=\"Logo\" />\n        <span v-show=\"!isCollapsed\">水土流失监测系统</span>\n      </div>\n      <el-menu\n        :default-active=\"activeMenu\"\n        :collapse=\"isCollapsed\"\n        :collapse-transition=\"false\"\n        class=\"menu\"\n        background-color=\"transparent\"\n        text-color=\"rgba(255, 255, 255, 0.65)\"\n        active-text-color=\"#fff\"\n        @select=\"handleMenuSelect\"\n      >\n        <el-menu-item index=\"/overview\">\n          <el-icon><Monitor /></el-icon>\n          <template #title>系统概览</template>\n        </el-menu-item>\n        <el-menu-item index=\"/monitoring\">\n          <el-icon><VideoCamera /></el-icon>\n          <template #title>智能检测</template>\n        </el-menu-item>\n        <el-menu-item index=\"/analysis\">\n          <el-icon><DataLine /></el-icon>\n          <template #title>数据分析</template>\n        </el-menu-item>\n        <el-menu-item index=\"/management\">\n          <el-icon><Files /></el-icon>\n          <template #title>数据管理</template>\n        </el-menu-item>\n        <el-menu-item index=\"/evaluation\">\n          <el-icon><TrendCharts /></el-icon>\n          <template #title>质量评估</template>\n        </el-menu-item>\n      </el-menu>\n    </div>\n\n    <!-- 主内容区 -->\n    <div class=\"main-container\">\n      <!-- 顶部导航栏 -->\n      <div class=\"header\">\n        <div class=\"header-left\">\n          <el-button\n            :icon=\"isCollapsed ? 'Expand' : 'Fold'\"\n            @click=\"toggleSidebar\"\n            class=\"collapse-btn\"\n          />\n          <el-breadcrumb separator=\"/\">\n            <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\n            <el-breadcrumb-item>{{ currentRoute }}</el-breadcrumb-item>\n          </el-breadcrumb>\n        </div>\n        <div class=\"header-right\">\n          <div class=\"user-info\">\n            <el-dropdown trigger=\"click\">\n              <div class=\"user-profile\">\n                <el-avatar :size=\"32\" :src=\"userAvatar\" />\n                <span class=\"username\">{{ username }}</span>\n                <el-icon><CaretBottom /></el-icon>\n              </div>\n              <template #dropdown>\n                <el-dropdown-menu>\n                  <el-dropdown-item @click=\"goToProfile\">\n                    <el-icon><User /></el-icon>个人信息\n                  </el-dropdown-item>\n                  <el-dropdown-item @click=\"goToSettings\">\n                    <el-icon><Setting /></el-icon>系统设置\n                  </el-dropdown-item>\n                  <el-dropdown-item divided @click=\"handleLogout\">\n                    <el-icon><SwitchButton /></el-icon>退出登录\n                  </el-dropdown-item>\n                </el-dropdown-menu>\n              </template>\n            </el-dropdown>\n          </div>\n        </div>\n      </div>\n\n      <!-- 内容区 -->\n      <div class=\"content\">\n        <router-view v-slot=\"{ Component }\">\n          <transition name=\"fade\" mode=\"out-in\">\n            <component :is=\"Component\" />\n          </transition>\n        </router-view>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, computed } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { useStore } from 'vuex'\nimport {\n  Monitor,\n  VideoCamera,\n  DataLine,\n  Files,\n  TrendCharts,\n  User,\n  Setting,\n  SwitchButton,\n  CaretBottom,\n  Expand,\n  Fold\n} from '@element-plus/icons-vue'\n\nexport default {\n  name: 'MainLayout',\n  components: {\n    Monitor,\n    VideoCamera,\n    DataLine,\n    Files,\n    TrendCharts,\n    User,\n    Setting,\n    SwitchButton,\n    CaretBottom,\n    Expand,\n    Fold\n  },\n  setup() {\n    const router = useRouter()\n    const route = useRoute()\n    const store = useStore()\n\n    const isCollapsed = ref(false)\n    const userAvatar = ref('https://avatars.githubusercontent.com/u/1?v=4')\n    const username = ref('Admin')\n\n    const activeMenu = computed(() => route.path)\n    const currentRoute = computed(() => {\n      const routeMap = {\n        '/overview': '系统概览',\n        '/monitoring': '智能检测',\n        '/analysis': '数据分析',\n        '/management': '数据管理',\n        '/evaluation': '质量评估'\n      }\n      return routeMap[route.path] || '未知页面'\n    })\n\n    const toggleSidebar = () => {\n      isCollapsed.value = !isCollapsed.value\n    }\n\n    const handleMenuSelect = (index) => {\n      router.push(index)\n    }\n\n    const goToProfile = () => {\n      router.push('/profile')\n    }\n\n    const goToSettings = () => {\n      router.push('/settings')\n    }\n\n    const handleLogout = async () => {\n      try {\n        await store.dispatch('auth/logout')\n        router.push('/login')\n      } catch (error) {\n        console.error('Logout failed:', error)\n      }\n    }\n\n    return {\n      isCollapsed,\n      userAvatar,\n      username,\n      activeMenu,\n      currentRoute,\n      toggleSidebar,\n      handleMenuSelect,\n      goToProfile,\n      goToSettings,\n      handleLogout\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/styles/variables.scss';\n\n.main-layout {\n  display: flex;\n  height: 100vh;\n  background-color: $background-base;\n\n  .sidebar {\n    width: $sidebar-width;\n    background: linear-gradient(180deg, #1a237e 0%, #283593 100%);\n    transition: width $animation-duration-base;\n    overflow: hidden;\n\n    &.collapsed {\n      width: 64px;\n\n      .logo {\n        padding: $spacing-sm;\n        justify-content: center;\n\n        span {\n          display: none;\n        }\n      }\n    }\n\n    .logo {\n      height: $header-height;\n      padding: $spacing-md;\n      display: flex;\n      align-items: center;\n      gap: $spacing-sm;\n      color: #fff;\n      font-size: $font-size-lg;\n      font-weight: 600;\n\n      img {\n        height: 32px;\n        width: 32px;\n      }\n    }\n\n    .menu {\n      border-right: none;\n      background: transparent;\n\n      :deep(.el-menu-item) {\n        height: 50px;\n        line-height: 50px;\n        \n        &.is-active {\n          background: rgba(255, 255, 255, 0.1);\n        }\n\n        &:hover {\n          background: rgba(255, 255, 255, 0.05);\n        }\n\n        .el-icon {\n          font-size: 18px;\n        }\n      }\n    }\n  }\n\n  .main-container {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n\n    .header {\n      height: $header-height;\n      background: #fff;\n      border-bottom: 1px solid $border-color;\n      padding: 0 $spacing-md;\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      box-shadow: $shadow-1;\n\n      .header-left {\n        display: flex;\n        align-items: center;\n        gap: $spacing-md;\n\n        .collapse-btn {\n          border: none;\n          background: transparent;\n          font-size: 20px;\n          padding: $spacing-xs;\n          cursor: pointer;\n          color: $text-secondary;\n\n          &:hover {\n            color: $text-primary;\n            background: rgba(0, 0, 0, 0.02);\n          }\n        }\n      }\n\n      .header-right {\n        .user-info {\n          .user-profile {\n            display: flex;\n            align-items: center;\n            gap: $spacing-sm;\n            cursor: pointer;\n            padding: $spacing-xs $spacing-sm;\n            border-radius: $border-radius-base;\n            transition: all $animation-duration-base;\n\n            &:hover {\n              background: rgba(0, 0, 0, 0.02);\n            }\n\n            .username {\n              font-size: $font-size-base;\n              color: $text-primary;\n            }\n\n            .el-icon {\n              font-size: 12px;\n              color: $text-secondary;\n            }\n          }\n        }\n      }\n    }\n\n    .content {\n      flex: 1;\n      padding: $spacing-md;\n      overflow-y: auto;\n\n      &::-webkit-scrollbar {\n        width: 6px;\n      }\n\n      &::-webkit-scrollbar-thumb {\n        background: rgba(0, 0, 0, 0.1);\n        border-radius: 3px;\n      }\n\n      &::-webkit-scrollbar-track {\n        background: transparent;\n      }\n    }\n  }\n}\n\n// 路由过渡动画\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity $animation-duration-base;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n</style> "],"mappings":"AAgGA,SAASA,GAAG,EAAEC,QAAO,QAAS,KAAI;AAClC,SAASC,SAAS,EAAEC,QAAO,QAAS,YAAW;AAC/C,SAASC,QAAO,QAAS,MAAK;AAC9B,SACEC,OAAO,EACPC,WAAW,EACXC,QAAQ,EACRC,KAAK,EACLC,WAAW,EACXC,IAAI,EACJC,OAAO,EACPC,YAAY,EACZC,WAAW,EACXC,MAAM,EACNC,IAAG,QACE,yBAAwB;AAE/B,eAAe;EACbC,IAAI,EAAE,YAAY;EAClBC,UAAU,EAAE;IACVZ,OAAO;IACPC,WAAW;IACXC,QAAQ;IACRC,KAAK;IACLC,WAAW;IACXC,IAAI;IACJC,OAAO;IACPC,YAAY;IACZC,WAAW;IACXC,MAAM;IACNC;EACF,CAAC;EACDG,KAAKA,CAAA,EAAG;IACN,MAAMC,MAAK,GAAIjB,SAAS,CAAC;IACzB,MAAMkB,KAAI,GAAIjB,QAAQ,CAAC;IACvB,MAAMkB,KAAI,GAAIjB,QAAQ,CAAC;IAEvB,MAAMkB,WAAU,GAAItB,GAAG,CAAC,KAAK;IAC7B,MAAMuB,UAAS,GAAIvB,GAAG,CAAC,+CAA+C;IACtE,MAAMwB,QAAO,GAAIxB,GAAG,CAAC,OAAO;IAE5B,MAAMyB,UAAS,GAAIxB,QAAQ,CAAC,MAAMmB,KAAK,CAACM,IAAI;IAC5C,MAAMC,YAAW,GAAI1B,QAAQ,CAAC,MAAM;MAClC,MAAM2B,QAAO,GAAI;QACf,WAAW,EAAE,MAAM;QACnB,aAAa,EAAE,MAAM;QACrB,WAAW,EAAE,MAAM;QACnB,aAAa,EAAE,MAAM;QACrB,aAAa,EAAE;MACjB;MACA,OAAOA,QAAQ,CAACR,KAAK,CAACM,IAAI,KAAK,MAAK;IACtC,CAAC;IAED,MAAMG,aAAY,GAAIA,CAAA,KAAM;MAC1BP,WAAW,CAACQ,KAAI,GAAI,CAACR,WAAW,CAACQ,KAAI;IACvC;IAEA,MAAMC,gBAAe,GAAKC,KAAK,IAAK;MAClCb,MAAM,CAACc,IAAI,CAACD,KAAK;IACnB;IAEA,MAAME,WAAU,GAAIA,CAAA,KAAM;MACxBf,MAAM,CAACc,IAAI,CAAC,UAAU;IACxB;IAEA,MAAME,YAAW,GAAIA,CAAA,KAAM;MACzBhB,MAAM,CAACc,IAAI,CAAC,WAAW;IACzB;IAEA,MAAMG,YAAW,GAAI,MAAAA,CAAA,KAAY;MAC/B,IAAI;QACF,MAAMf,KAAK,CAACgB,QAAQ,CAAC,aAAa;QAClClB,MAAM,CAACc,IAAI,CAAC,QAAQ;MACtB,EAAE,OAAOK,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,gBAAgB,EAAEA,KAAK;MACvC;IACF;IAEA,OAAO;MACLhB,WAAW;MACXC,UAAU;MACVC,QAAQ;MACRC,UAAU;MACVE,YAAY;MACZE,aAAa;MACbE,gBAAgB;MAChBG,WAAW;MACXC,YAAY;MACZC;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}