{"ast":null,"code":"import { renderSlot as _renderSlot, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createBlock as _createBlock, mergeProps as _mergeProps, resolveDirective as _resolveDirective, withCtx as _withCtx, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = {\n  class: \"base-table\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"table-header\"\n};\nconst _hoisted_3 = {\n  class: \"header-left\"\n};\nconst _hoisted_4 = {\n  key: 0\n};\nconst _hoisted_5 = {\n  class: \"header-right\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"search-box\"\n};\nconst _hoisted_7 = {\n  key: 1,\n  class: \"table-toolbar\"\n};\nconst _hoisted_8 = {\n  class: \"empty-block\"\n};\nconst _hoisted_9 = {\n  key: 2,\n  class: \"table-footer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_empty = _resolveComponent(\"el-empty\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_pagination = _resolveComponent(\"el-pagination\");\n  const _directive_loading = _resolveDirective(\"loading\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$props.showHeader ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_renderSlot(_ctx.$slots, \"header-left\", {}, () => [$props.title ? (_openBlock(), _createElementBlock(\"h3\", _hoisted_4, _toDisplayString($props.title), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)], true)]), _createElementVNode(\"div\", _hoisted_5, [_renderSlot(_ctx.$slots, \"header-right\", {}, () => [$props.showSearch ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createVNode(_component_el_input, {\n    modelValue: $setup.searchText,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.searchText = $event),\n    placeholder: $props.searchPlaceholder,\n    \"prefix-icon\": \"Search\",\n    clearable: \"\",\n    onInput: $setup.handleSearch\n  }, null, 8 /* PROPS */, [\"modelValue\", \"placeholder\", \"onInput\"])])) : _createCommentVNode(\"v-if\", true)], true)])])) : _createCommentVNode(\"v-if\", true), _ctx.$slots.toolbar ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_renderSlot(_ctx.$slots, \"toolbar\", {}, undefined, true)])) : _createCommentVNode(\"v-if\", true), _withDirectives((_openBlock(), _createBlock(_component_el_table, _mergeProps({\n    ref: \"tableRef\"\n  }, _ctx.$attrs, {\n    data: $setup.filteredData,\n    height: $props.height,\n    \"max-height\": $props.maxHeight,\n    border: $props.border,\n    stripe: $props.stripe,\n    \"element-loading-text\": $props.loadingText,\n    onSelectionChange: $setup.handleSelectionChange\n  }), {\n    empty: _withCtx(() => [_createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_el_empty, {\n      description: $props.emptyText\n    }, null, 8 /* PROPS */, [\"description\"])])]),\n    default: _withCtx(() => [$props.selection ? (_openBlock(), _createBlock(_component_el_table_column, {\n      key: 0,\n      type: \"selection\",\n      width: \"55\",\n      align: \"center\",\n      fixed: \"left\"\n    })) : _createCommentVNode(\"v-if\", true), $props.showIndex ? (_openBlock(), _createBlock(_component_el_table_column, {\n      key: 1,\n      type: \"index\",\n      width: \"60\",\n      label: \"序号\",\n      align: \"center\"\n    })) : _createCommentVNode(\"v-if\", true), _renderSlot(_ctx.$slots, \"default\", {}, undefined, true)]),\n    _: 3 /* FORWARDED */\n  }, 16 /* FULL_PROPS */, [\"data\", \"height\", \"max-height\", \"border\", \"stripe\", \"element-loading-text\", \"onSelectionChange\"])), [[_directive_loading, $props.loading]]), $props.showPagination ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createVNode(_component_el_pagination, {\n    \"current-page\": $setup.currentPage,\n    \"onUpdate:currentPage\": _cache[1] || (_cache[1] = $event => $setup.currentPage = $event),\n    \"page-size\": $setup.pageSize,\n    \"onUpdate:pageSize\": _cache[2] || (_cache[2] = $event => $setup.pageSize = $event),\n    \"page-sizes\": $props.pageSizes,\n    total: $props.total,\n    layout: $props.paginationLayout,\n    onSizeChange: $setup.handleSizeChange,\n    onCurrentChange: $setup.handleCurrentChange\n  }, null, 8 /* PROPS */, [\"current-page\", \"page-size\", \"page-sizes\", \"total\", \"layout\", \"onSizeChange\", \"onCurrentChange\"])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","$props","showHeader","_hoisted_2","_createElementVNode","_hoisted_3","_renderSlot","_ctx","$slots","title","_hoisted_4","_toDisplayString","_hoisted_5","showSearch","_hoisted_6","_createVNode","_component_el_input","$setup","searchText","$event","placeholder","searchPlaceholder","clearable","onInput","handleSearch","toolbar","_hoisted_7","undefined","_createBlock","_component_el_table","_mergeProps","ref","$attrs","data","filteredData","height","maxHeight","border","stripe","loadingText","onSelectionChange","handleSelectionChange","empty","_withCtx","_hoisted_8","_component_el_empty","description","emptyText","selection","_component_el_table_column","type","width","align","fixed","showIndex","label","loading","showPagination","_hoisted_9","_component_el_pagination","currentPage","pageSize","pageSizes","total","layout","paginationLayout","onSizeChange","handleSizeChange","onCurrentChange","handleCurrentChange"],"sources":["D:\\restore\\water-melt\\frontend\\src\\components\\BaseTable.vue"],"sourcesContent":["<template>\r\n  <div class=\"base-table\">\r\n    <div class=\"table-header\" v-if=\"showHeader\">\r\n      <div class=\"header-left\">\r\n        <slot name=\"header-left\">\r\n          <h3 v-if=\"title\">{{ title }}</h3>\r\n        </slot>\r\n      </div>\r\n      <div class=\"header-right\">\r\n        <slot name=\"header-right\">\r\n          <div class=\"search-box\" v-if=\"showSearch\">\r\n            <el-input\r\n              v-model=\"searchText\"\r\n              :placeholder=\"searchPlaceholder\"\r\n              prefix-icon=\"Search\"\r\n              clearable\r\n              @input=\"handleSearch\"\r\n            />\r\n          </div>\r\n        </slot>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"table-toolbar\" v-if=\"$slots.toolbar\">\r\n      <slot name=\"toolbar\" />\r\n    </div>\r\n\r\n    <el-table\r\n      ref=\"tableRef\"\r\n      v-bind=\"$attrs\"\r\n      :data=\"filteredData\"\r\n      :height=\"height\"\r\n      :max-height=\"maxHeight\"\r\n      :border=\"border\"\r\n      :stripe=\"stripe\"\r\n      v-loading=\"loading\"\r\n      :element-loading-text=\"loadingText\"\r\n      @selection-change=\"handleSelectionChange\"\r\n    >\r\n      <el-table-column\r\n        v-if=\"selection\"\r\n        type=\"selection\"\r\n        width=\"55\"\r\n        align=\"center\"\r\n        fixed=\"left\"\r\n      />\r\n      <el-table-column\r\n        v-if=\"showIndex\"\r\n        type=\"index\"\r\n        width=\"60\"\r\n        label=\"序号\"\r\n        align=\"center\"\r\n      />\r\n      <slot />\r\n      <template #empty>\r\n        <div class=\"empty-block\">\r\n          <el-empty :description=\"emptyText\" />\r\n        </div>\r\n      </template>\r\n    </el-table>\r\n\r\n    <div class=\"table-footer\" v-if=\"showPagination\">\r\n      <el-pagination\r\n        v-model:current-page=\"currentPage\"\r\n        v-model:page-size=\"pageSize\"\r\n        :page-sizes=\"pageSizes\"\r\n        :total=\"total\"\r\n        :layout=\"paginationLayout\"\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed } from 'vue'\r\nimport { Search } from '@element-plus/icons-vue'\r\n\r\nexport default {\r\n  name: 'BaseTable',\r\n  components: {\r\n    Search\r\n  },\r\n  props: {\r\n    data: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    showHeader: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    showSearch: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    searchPlaceholder: {\r\n      type: String,\r\n      default: '搜索...'\r\n    },\r\n    searchKeys: {\r\n      type: Array,\r\n      default: () => ['name']\r\n    },\r\n    selection: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    showIndex: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    border: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    stripe: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    height: {\r\n      type: [String, Number],\r\n      default: ''\r\n    },\r\n    maxHeight: {\r\n      type: [String, Number],\r\n      default: ''\r\n    },\r\n    loading: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    loadingText: {\r\n      type: String,\r\n      default: '加载中...'\r\n    },\r\n    emptyText: {\r\n      type: String,\r\n      default: '暂无数据'\r\n    },\r\n    showPagination: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    total: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    pageSizes: {\r\n      type: Array,\r\n      default: () => [10, 20, 50, 100]\r\n    },\r\n    paginationLayout: {\r\n      type: String,\r\n      default: 'total, sizes, prev, pager, next, jumper'\r\n    }\r\n  },\r\n  emits: [\r\n    'selection-change',\r\n    'size-change',\r\n    'current-change',\r\n    'search'\r\n  ],\r\n  setup(props, { emit }) {\r\n    const tableRef = ref(null)\r\n    const searchText = ref('')\r\n    const currentPage = ref(1)\r\n    const pageSize = ref(props.pageSizes[0])\r\n\r\n    const filteredData = computed(() => {\r\n      if (!searchText.value) return props.data\r\n      const searchValue = searchText.value.toLowerCase()\r\n      return props.data.filter(item => {\r\n        return props.searchKeys.some(key => {\r\n          const value = item[key]\r\n          if (value == null) return false\r\n          return String(value).toLowerCase().includes(searchValue)\r\n        })\r\n      })\r\n    })\r\n\r\n    const handleSearch = () => {\r\n      emit('search', searchText.value)\r\n    }\r\n\r\n    const handleSelectionChange = (selection) => {\r\n      emit('selection-change', selection)\r\n    }\r\n\r\n    const handleSizeChange = (val) => {\r\n      pageSize.value = val\r\n      emit('size-change', val)\r\n    }\r\n\r\n    const handleCurrentChange = (val) => {\r\n      currentPage.value = val\r\n      emit('current-change', val)\r\n    }\r\n\r\n    // 暴露方法给父组件\r\n    const toggleSelection = (rows) => {\r\n      if (rows) {\r\n        rows.forEach(row => {\r\n          tableRef.value?.toggleRowSelection(row)\r\n        })\r\n      } else {\r\n        tableRef.value?.clearSelection()\r\n      }\r\n    }\r\n\r\n    return {\r\n      tableRef,\r\n      searchText,\r\n      currentPage,\r\n      pageSize,\r\n      filteredData,\r\n      handleSearch,\r\n      handleSelectionChange,\r\n      handleSizeChange,\r\n      handleCurrentChange,\r\n      toggleSelection\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '@/styles/variables.scss';\r\n\r\n.base-table {\r\n  .table-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: $spacing-md;\r\n\r\n    .header-left {\r\n      h3 {\r\n        margin: 0;\r\n        font-size: $heading-4-size;\r\n        font-weight: 600;\r\n        color: $text-primary;\r\n      }\r\n    }\r\n\r\n    .header-right {\r\n      .search-box {\r\n        width: 250px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .table-toolbar {\r\n    margin-bottom: $spacing-md;\r\n  }\r\n\r\n  .empty-block {\r\n    padding: $spacing-xl 0;\r\n  }\r\n\r\n  .table-footer {\r\n    margin-top: $spacing-md;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n  }\r\n\r\n  :deep(.el-table) {\r\n    // 自定义表格样式\r\n    .el-table__header {\r\n      th {\r\n        background-color: $background-light;\r\n        color: $text-primary;\r\n        font-weight: 600;\r\n      }\r\n    }\r\n\r\n    .el-table__row {\r\n      &:hover > td {\r\n        background-color: rgba($primary-color, 0.1);\r\n      }\r\n    }\r\n  }\r\n\r\n  :deep(.el-pagination) {\r\n    // 自定义分页样式\r\n    .el-pagination__total {\r\n      margin-right: $spacing-md;\r\n    }\r\n\r\n    .el-pagination__sizes {\r\n      margin-right: $spacing-md;\r\n    }\r\n  }\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}