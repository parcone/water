{"ast":null,"code":"import { ref, computed } from 'vue';\nimport { Search } from '@element-plus/icons-vue';\nexport default {\n  name: 'BaseTable',\n  components: {\n    Search\n  },\n  props: {\n    data: {\n      type: Array,\n      default: () => []\n    },\n    title: {\n      type: String,\n      default: ''\n    },\n    showHeader: {\n      type: Boolean,\n      default: true\n    },\n    showSearch: {\n      type: Boolean,\n      default: false\n    },\n    searchPlaceholder: {\n      type: String,\n      default: '搜索...'\n    },\n    searchKeys: {\n      type: Array,\n      default: () => ['name']\n    },\n    selection: {\n      type: Boolean,\n      default: false\n    },\n    showIndex: {\n      type: Boolean,\n      default: false\n    },\n    border: {\n      type: Boolean,\n      default: true\n    },\n    stripe: {\n      type: Boolean,\n      default: true\n    },\n    height: {\n      type: [String, Number],\n      default: ''\n    },\n    maxHeight: {\n      type: [String, Number],\n      default: ''\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    },\n    loadingText: {\n      type: String,\n      default: '加载中...'\n    },\n    emptyText: {\n      type: String,\n      default: '暂无数据'\n    },\n    showPagination: {\n      type: Boolean,\n      default: true\n    },\n    total: {\n      type: Number,\n      default: 0\n    },\n    pageSizes: {\n      type: Array,\n      default: () => [10, 20, 50, 100]\n    },\n    paginationLayout: {\n      type: String,\n      default: 'total, sizes, prev, pager, next, jumper'\n    }\n  },\n  emits: ['selection-change', 'size-change', 'current-change', 'search'],\n  setup(props, {\n    emit\n  }) {\n    const tableRef = ref(null);\n    const searchText = ref('');\n    const currentPage = ref(1);\n    const pageSize = ref(props.pageSizes[0]);\n    const filteredData = computed(() => {\n      if (!searchText.value) return props.data;\n      const searchValue = searchText.value.toLowerCase();\n      return props.data.filter(item => {\n        return props.searchKeys.some(key => {\n          const value = item[key];\n          if (value == null) return false;\n          return String(value).toLowerCase().includes(searchValue);\n        });\n      });\n    });\n    const handleSearch = () => {\n      emit('search', searchText.value);\n    };\n    const handleSelectionChange = selection => {\n      emit('selection-change', selection);\n    };\n    const handleSizeChange = val => {\n      pageSize.value = val;\n      emit('size-change', val);\n    };\n    const handleCurrentChange = val => {\n      currentPage.value = val;\n      emit('current-change', val);\n    };\n\n    // 暴露方法给父组件\n    const toggleSelection = rows => {\n      if (rows) {\n        rows.forEach(row => {\n          tableRef.value?.toggleRowSelection(row);\n        });\n      } else {\n        tableRef.value?.clearSelection();\n      }\n    };\n    return {\n      tableRef,\n      searchText,\n      currentPage,\n      pageSize,\n      filteredData,\n      handleSearch,\n      handleSelectionChange,\n      handleSizeChange,\n      handleCurrentChange,\n      toggleSelection\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","Search","name","components","props","data","type","Array","default","title","String","showHeader","Boolean","showSearch","searchPlaceholder","searchKeys","selection","showIndex","border","stripe","height","Number","maxHeight","loading","loadingText","emptyText","showPagination","total","pageSizes","paginationLayout","emits","setup","emit","tableRef","searchText","currentPage","pageSize","filteredData","value","searchValue","toLowerCase","filter","item","some","key","includes","handleSearch","handleSelectionChange","handleSizeChange","val","handleCurrentChange","toggleSelection","rows","forEach","row","toggleRowSelection","clearSelection"],"sources":["D:\\restore\\water-melt\\frontend\\src\\components\\BaseTable.vue"],"sourcesContent":["<template>\r\n  <div class=\"base-table\">\r\n    <div class=\"table-header\" v-if=\"showHeader\">\r\n      <div class=\"header-left\">\r\n        <slot name=\"header-left\">\r\n          <h3 v-if=\"title\">{{ title }}</h3>\r\n        </slot>\r\n      </div>\r\n      <div class=\"header-right\">\r\n        <slot name=\"header-right\">\r\n          <div class=\"search-box\" v-if=\"showSearch\">\r\n            <el-input\r\n              v-model=\"searchText\"\r\n              :placeholder=\"searchPlaceholder\"\r\n              prefix-icon=\"Search\"\r\n              clearable\r\n              @input=\"handleSearch\"\r\n            />\r\n          </div>\r\n        </slot>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"table-toolbar\" v-if=\"$slots.toolbar\">\r\n      <slot name=\"toolbar\" />\r\n    </div>\r\n\r\n    <el-table\r\n      ref=\"tableRef\"\r\n      v-bind=\"$attrs\"\r\n      :data=\"filteredData\"\r\n      :height=\"height\"\r\n      :max-height=\"maxHeight\"\r\n      :border=\"border\"\r\n      :stripe=\"stripe\"\r\n      v-loading=\"loading\"\r\n      :element-loading-text=\"loadingText\"\r\n      @selection-change=\"handleSelectionChange\"\r\n    >\r\n      <el-table-column\r\n        v-if=\"selection\"\r\n        type=\"selection\"\r\n        width=\"55\"\r\n        align=\"center\"\r\n        fixed=\"left\"\r\n      />\r\n      <el-table-column\r\n        v-if=\"showIndex\"\r\n        type=\"index\"\r\n        width=\"60\"\r\n        label=\"序号\"\r\n        align=\"center\"\r\n      />\r\n      <slot />\r\n      <template #empty>\r\n        <div class=\"empty-block\">\r\n          <el-empty :description=\"emptyText\" />\r\n        </div>\r\n      </template>\r\n    </el-table>\r\n\r\n    <div class=\"table-footer\" v-if=\"showPagination\">\r\n      <el-pagination\r\n        v-model:current-page=\"currentPage\"\r\n        v-model:page-size=\"pageSize\"\r\n        :page-sizes=\"pageSizes\"\r\n        :total=\"total\"\r\n        :layout=\"paginationLayout\"\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed } from 'vue'\r\nimport { Search } from '@element-plus/icons-vue'\r\n\r\nexport default {\r\n  name: 'BaseTable',\r\n  components: {\r\n    Search\r\n  },\r\n  props: {\r\n    data: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    showHeader: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    showSearch: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    searchPlaceholder: {\r\n      type: String,\r\n      default: '搜索...'\r\n    },\r\n    searchKeys: {\r\n      type: Array,\r\n      default: () => ['name']\r\n    },\r\n    selection: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    showIndex: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    border: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    stripe: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    height: {\r\n      type: [String, Number],\r\n      default: ''\r\n    },\r\n    maxHeight: {\r\n      type: [String, Number],\r\n      default: ''\r\n    },\r\n    loading: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    loadingText: {\r\n      type: String,\r\n      default: '加载中...'\r\n    },\r\n    emptyText: {\r\n      type: String,\r\n      default: '暂无数据'\r\n    },\r\n    showPagination: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    total: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    pageSizes: {\r\n      type: Array,\r\n      default: () => [10, 20, 50, 100]\r\n    },\r\n    paginationLayout: {\r\n      type: String,\r\n      default: 'total, sizes, prev, pager, next, jumper'\r\n    }\r\n  },\r\n  emits: [\r\n    'selection-change',\r\n    'size-change',\r\n    'current-change',\r\n    'search'\r\n  ],\r\n  setup(props, { emit }) {\r\n    const tableRef = ref(null)\r\n    const searchText = ref('')\r\n    const currentPage = ref(1)\r\n    const pageSize = ref(props.pageSizes[0])\r\n\r\n    const filteredData = computed(() => {\r\n      if (!searchText.value) return props.data\r\n      const searchValue = searchText.value.toLowerCase()\r\n      return props.data.filter(item => {\r\n        return props.searchKeys.some(key => {\r\n          const value = item[key]\r\n          if (value == null) return false\r\n          return String(value).toLowerCase().includes(searchValue)\r\n        })\r\n      })\r\n    })\r\n\r\n    const handleSearch = () => {\r\n      emit('search', searchText.value)\r\n    }\r\n\r\n    const handleSelectionChange = (selection) => {\r\n      emit('selection-change', selection)\r\n    }\r\n\r\n    const handleSizeChange = (val) => {\r\n      pageSize.value = val\r\n      emit('size-change', val)\r\n    }\r\n\r\n    const handleCurrentChange = (val) => {\r\n      currentPage.value = val\r\n      emit('current-change', val)\r\n    }\r\n\r\n    // 暴露方法给父组件\r\n    const toggleSelection = (rows) => {\r\n      if (rows) {\r\n        rows.forEach(row => {\r\n          tableRef.value?.toggleRowSelection(row)\r\n        })\r\n      } else {\r\n        tableRef.value?.clearSelection()\r\n      }\r\n    }\r\n\r\n    return {\r\n      tableRef,\r\n      searchText,\r\n      currentPage,\r\n      pageSize,\r\n      filteredData,\r\n      handleSearch,\r\n      handleSelectionChange,\r\n      handleSizeChange,\r\n      handleCurrentChange,\r\n      toggleSelection\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.base-table {\r\n  .table-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: $spacing-md;\r\n\r\n    .header-left {\r\n      h3 {\r\n        margin: 0;\r\n        font-size: $heading-4-size;\r\n        font-weight: 600;\r\n        color: $text-primary;\r\n      }\r\n    }\r\n\r\n    .header-right {\r\n      .search-box {\r\n        width: 250px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .table-toolbar {\r\n    margin-bottom: $spacing-md;\r\n  }\r\n\r\n  .empty-block {\r\n    padding: $spacing-xl 0;\r\n  }\r\n\r\n  .table-footer {\r\n    margin-top: $spacing-md;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n  }\r\n\r\n  :deep(.el-table) {\r\n    // 自定义表格样式\r\n    .el-table__header {\r\n      th {\r\n        background-color: $background-light;\r\n        color: $text-primary;\r\n        font-weight: 600;\r\n      }\r\n    }\r\n\r\n    .el-table__row {\r\n      &:hover > td {\r\n        background-color: rgba($primary-color, 0.1);\r\n      }\r\n    }\r\n  }\r\n\r\n  :deep(.el-pagination) {\r\n    // 自定义分页样式\r\n    .el-pagination__total {\r\n      margin-right: $spacing-md;\r\n    }\r\n\r\n    .el-pagination__sizes {\r\n      margin-right: $spacing-md;\r\n    }\r\n  }\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}